<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>EDT v3 — Thermal SLAM Point Cloud</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { margin:0; background:#0b0f14; color:#eaf0f6; font-family:system-ui; }
    #ui { position:fixed; top:0; left:0; right:0; display:flex; flex-wrap:wrap; gap:8px;
          padding:10px; background:rgba(10,14,22,0.7); border-bottom:1px solid #223; z-index:10; }
    button, input[type="range"], select { background:#142033; color:#eaf0f6; border:1px solid #2a3b59;
          border-radius:6px; padding:6px 10px; }
    #viewport { position:fixed; inset:0; top:52px; }
    #status { position:fixed; bottom:0; left:0; right:0; max-height:30vh; overflow:auto;
              background:rgba(10,14,22,0.75); font-size:12px; padding:6px; border-top:1px solid #223; }
    #status .item { margin:4px 0; }
  </style>
</head>
<body>
  <div id="ui">
    <button id="btnStart">Start</button>
    <button id="btnStop" disabled>Stop</button>
    <button id="btnSwitch">Switch Camera</button>
    <button id="btnClear">Clear Map</button>
    <label>Depth scale <input id="depthScale" type="range" min="0.2" max="4" step="0.1" value="1.0"></label>
    <label>Sampling <input id="sampling" type="range" min="1" max="8" step="1" value="2"></label>
    <label>Point size <input id="pointSize" type="range" min="1" max="8" step="1" value="3"></label>
  </div>

  <canvas id="viewport"></canvas>
  <div id="status"></div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  <script>
    const statusEl = document.getElementById('status');
    function log(level,msg){
      const ts=new Date().toLocaleTimeString();
      const div=document.createElement('div');
      div.className='item';
      div.textContent=`[${ts}] ${level.toUpperCase()}: ${msg}`;
      statusEl.prepend(div);
    }

    // Simple Three.js scene
    const scene=new THREE.Scene();
    const camera=new THREE.PerspectiveCamera(60,window.innerWidth/(window.innerHeight-52),0.1,1000);
    camera.position.set(0,2,6);
    const renderer=new THREE.WebGLRenderer({canvas:document.getElementById('viewport')});
    renderer.setSize(window.innerWidth,window.innerHeight-52);
    const grid=new THREE.GridHelper(20,20,0x335577,0x223344);
    scene.add(grid);
    const light=new THREE.HemisphereLight(0x88aaff,0x223344,0.8);
    scene.add(light);

    function animate(){
      requestAnimationFrame(animate);
      renderer.render(scene,camera);
    }
    animate();

    // UI handlers
    document.getElementById('depthScale').addEventListener('input',e=>{
      log('info','Depth scale set to '+e.target.value);
    });
    document.getElementById('sampling').addEventListener('input',e=>{
      log('info','Sampling step set to '+e.target.value);
    });
    document.getElementById('pointSize').addEventListener('input',e=>{
      log('info','Point size set to '+e.target.value);
    });

    document.getElementById('btnStart').onclick=()=>{
      if(location.protocol!=='https:' && location.hostname!=='localhost'){
        log('critical','Camera requires HTTPS or localhost. Running in demo mode without webcam.');
        return;
      }
      log('info','Start pressed — webcam init would go here.');
    };
    document.getElementById('btnStop').onclick=()=>log('info','Stop pressed.');
    document.getElementById('btnSwitch').onclick=()=>log('info','Switch camera pressed.');
    document.getElementById('btnClear').onclick=()=>log('info','Clear map pressed.');
  </script>
</body>
</html>

