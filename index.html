<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <meta name="description" content="webXOS 2026: A web-based operating system with modular tools and agents featuring enhanced mobile support and GPU acceleration.">
    <title>webXOS 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.20.0/dist/tf.min.js"></script>
    <!-- GPU.js -->
    <script src="https://cdn.jsdelivr.net/npm/gpu.js@2.16.0/dist/gpu-browser.min.js"></script>
    <style>
        /* === EXACT ORIGINAL CSS with MOBILE ENHANCEMENTS === */
        :root {
            --terminal-black: #000000;
            --terminal-green: #00FF00;
            --terminal-red: #FF0000;
            --terminal-gray: #1E1E1E;
            --terminal-light-gray: #2D2D2D;
            --terminal-medium-gray: #3A3A3A;
            --terminal-border: #7A7A7A;
            --terminal-yellow: #FFFF00;
            --terminal-blue: #000080;
            --terminal-cyan: #00FFFF;
            --gpu-active: #00FF88;
            --gpu-inactive: #FF4444;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            image-rendering: pixelated;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: 'Courier New', monospace;
            background-color: var(--terminal-black);
            color: var(--terminal-green);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            touch-action: manipulation;
        }
        
        /* === TOP TASKBAR (like original) === */
        .top-taskbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 42px;
            background: var(--terminal-gray);
            border-bottom: 1px solid #fff;
            display: flex;
            align-items: center;
            padding: 0 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .start-btn {
            background: var(--terminal-black);
            border: 1px outset var(--terminal-green);
            padding: 4px 14px;
            font-weight: bold;
            color: var(--terminal-green);
            cursor: pointer;
            margin-right: 8px;
            font-size: 1rem;
            min-height: 32px;
            type: button;
        }
        .start-btn:active {
            border: 1px inset var(--terminal-green);
        }
        .taskbar-icons {
            display: flex;
            gap: 6px;
            flex-grow: 1;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .task-icon {
            width: 32px; height: 32px;
            background: var(--terminal-light-gray);
            border: 1px solid var(--terminal-medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            color: var(--terminal-green);
            flex-shrink: 0;
        }
        .task-icon.active {
            background: var(--terminal-green);
            color: black;
        }
        .task-icon.admin {
            background: var(--terminal-blue);
            color: white;
        }
        .task-icon.metrics {
            background: var(--terminal-light-gray);
            color: var(--terminal-green);
        }
        .top-clock {
            margin-left: auto;
            font-size: 1rem;
            padding: 0 10px;
            flex-shrink: 0;
            color: var(--terminal-yellow);
        }
        
        /* === BOTTOM METRICS BAR === */
        .bottom-metrics {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 32px;
            background: rgba(30, 30, 30, 0.95);
            border-top: 1px solid var(--terminal-green);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 0 15px;
            z-index: 1000;
            gap: 25px;
            font-size: 0.85rem;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        .metric-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .metric-led {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        .metric-led.active {
            background-color: var(--gpu-active);
            box-shadow: 0 0 8px var(--gpu-active);
        }
        .metric-led.inactive {
            background-color: var(--gpu-inactive);
        }
        .metric-label {
            color: var(--terminal-green);
            margin-right: 2px;
        }
        .metric-value {
            color: var(--terminal-yellow);
            font-weight: bold;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* === NEURAL DOT GALAXY BACKGROUND === */
        #galaxyCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        /* === ENHANCED LOADING SCREEN === */
        .loading-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--terminal-black);
            display: flex; align-items: center; justify-content: center;
            z-index: 9999; flex-direction: column;
            font-size: 1.2rem;
            text-align: center;
        }
        .loading-screen.hidden {
            display: none;
        }
        .loading-bar {
            width: 400px; height: 20px;
            background: var(--terminal-light-gray);
            margin-top: 40px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid var(--terminal-green);
            box-shadow: 0 0 20px var(--terminal-green), 0 0 40px var(--terminal-green);
        }
        .loading-fill {
            width: 0%; height: 100%;
            background: var(--terminal-green);
            box-shadow: 0 0 15px var(--terminal-green), 0 0 30px var(--terminal-green);
            transition: width 0.3s;
        }
        .webxos-logo {
            font-size: 6rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow:
                0 0 10px var(--terminal-green),
                0 0 20px var(--terminal-green),
                0 0 30px var(--terminal-green),
                0 0 40px var(--terminal-green);
            animation: glow 2s infinite alternate, flow 3s infinite alternate;
            color: var(--terminal-green);
        }
        .webxos-subtitle {
            font-size: 1.5rem;
            color: var(--terminal-yellow);
            margin-bottom: 40px;
            text-shadow: 0 0 10px var(--terminal-yellow);
        }
        @keyframes glow {
            0% { text-shadow: 0 0 10px var(--terminal-green), 0 0 20px var(--terminal-green); }
            100% { text-shadow: 0 0 20px var(--terminal-green), 0 0 40px var(--terminal-green), 0 0 60px var(--terminal-green); }
        }
        @keyframes flow {
            0% { transform: translateY(0); }
            100% { transform: translateY(-15px); }
        }
        
        /* === DESKTOP === */
        .desktop {
            flex: 1;
            padding: 10px;
            overflow: auto;
            position: relative;
            background: transparent;
            margin-top: 42px; /* Space for top taskbar */
            margin-bottom: 32px; /* Space for bottom metrics */
        }
        .desktop-icon {
            width: 90px;
            text-align: center;
            margin: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            color: #00FF00; /* Enhanced contrast */
            transition: all 0.2s;
            position: absolute;
            user-select: none;
            -webkit-user-select: none;
            padding: 5px;
            border-radius: 5px;
        }
        .desktop-icon:hover {
            color: var(--terminal-yellow);
            background: rgba(0, 255, 0, 0.1);
            border-radius: 4px;
        }
        .desktop-icon.selected {
            background: rgba(0, 128, 0, 0.5);
            color: white;
        }
        .desktop-icon i {
            font-size: 36px;
            display: block;
            margin-bottom: 6px;
            filter: drop-shadow(0 0 3px var(--terminal-green));
        }
        .desktop-icon.folder i {
            color: var(--terminal-yellow);
            filter: drop-shadow(0 0 3px var(--terminal-yellow));
        }
        .desktop-icon.trash i {
            color: var(--terminal-red);
            filter: drop-shadow(0 0 3px var(--terminal-red));
        }
        .desktop-icon.metrics i {
            color: var(--terminal-green);
            filter: drop-shadow(0 0 3px var(--terminal-green));
        }
        
        /* === WINDOWS === */
        .win95-window {
            position: absolute;
            background: var(--terminal-gray);
            border: 2px solid var(--terminal-border);
            border-top-color: #fff;
            border-left-color: #fff;
            box-shadow: 3px 3px 8px rgba(0,0,0,0.8);
            min-width: 300px;
            min-height: 300px;
            display: none;
            flex-direction: column;
            max-width: 95vw;
            max-height: 85vh;
            z-index: 50;
        }
        .win95-window.active {
            display: flex;
            z-index: 100;
        }
        .win95-window.maximized {
            top: 42px !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100% - 74px) !important;
            max-width: 100vw;
            max-height: calc(100vh - 74px);
        }
        .title-bar {
            background: linear-gradient(90deg, var(--terminal-blue), #1084d0);
            color: white;
            padding: 6px 10px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
            min-height: 32px;
            touch-action: none;
        }
        .title-bar.admin {
            background: linear-gradient(90deg, #4B0082, #8A2BE2);
        }
        .title-bar.metrics {
            background: linear-gradient(90deg, var(--terminal-blue), #1084d0);
        }
        .title-bar button {
            width: 22px; height: 20px;
            background: var(--terminal-gray);
            border: 1px solid #fff;
            font-size: 12px;
            text-align: center;
            line-height: 12px;
            margin-left: 4px;
            cursor: pointer;
            min-width: 22px;
            type: button;
        }
        .title-bar button:last-child {
            background-color: var(--terminal-red);
            color: white;
        }
        .window-content {
            flex: 1;
            padding: 10px;
            overflow: auto;
            background: var(--terminal-black);
            display: flex;
            flex-direction: column;
            -webkit-overflow-scrolling: touch;
        }
        
        /* === KERNEL OPS WINDOW === */
        .kernel-ops-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            flex-direction: column;
        }
        .kernel-header {
            padding: 12px 15px;
            background-color: var(--terminal-light-gray);
            border-bottom: 1px solid var(--terminal-medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            color: var(--terminal-green);
            min-height: 44px;
        }
        .kernel-toolbar {
            display: flex;
            gap: 10px;
            padding: 10px 15px;
            background-color: var(--terminal-gray);
            border-bottom: 1px solid var(--terminal-medium-gray);
            align-items: center;
            flex-wrap: wrap;
            min-height: 50px;
        }
        .kernel-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: var(--terminal-black);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .kernel-panel {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid var(--terminal-medium-gray);
            border-radius: 5px;
            padding: 15px;
        }
        .kernel-panel-title {
            color: var(--terminal-yellow);
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--terminal-medium-gray);
            padding-bottom: 8px;
        }
        .agent-controls-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        .control-group {
            margin-bottom: 15px;
        }
        .control-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            color: var(--terminal-cyan);
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: var(--terminal-light-gray);
            border-radius: 3px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--terminal-green);
            border-radius: 50%;
            cursor: pointer;
        }
        .kernel-output {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: var(--terminal-green);
            background: rgba(0, 20, 0, 0.5);
            padding: 10px;
            border: 1px solid var(--terminal-medium-gray);
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        .btn {
            background: none;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--terminal-green);
            font-size: 0.9rem;
            background: var(--terminal-gray);
            border: 1px solid var(--terminal-medium-gray);
            min-height: 36px;
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            type: button;
        }
        .btn:hover {
            background-color: var(--terminal-medium-gray);
        }
        .btn-primary {
            background-color: var(--terminal-blue);
            color: white;
        }
        .btn-primary:hover {
            background-color: #3367d6;
        }
        .kernel-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        .stat-item {
            background: rgba(40, 40, 40, 0.8);
            padding: 8px;
            border: 1px solid var(--terminal-medium-gray);
            border-radius: 4px;
        }
        .stat-label {
            font-size: 0.8rem;
            color: var(--terminal-yellow);
        }
        .stat-value {
            font-size: 1rem;
            color: var(--terminal-green);
            font-weight: bold;
        }
        
        /* === ENHANCED WRITE APPLICATION - LARGER EDITOR === */
        .editor-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            flex-direction: row;
        }
        .editor-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border-right: 1px solid var(--terminal-medium-gray);
        }
        .editor-panel:first-child {
            flex: 1.5; /* Larger editor area */
        }
        .editor-panel:last-child {
            border-right: none;
            flex: 1; /* Preview area */
        }
        .editor-header {
            padding: 12px 15px;
            background-color: var(--terminal-light-gray);
            border-bottom: 1px solid var(--terminal-medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            color: var(--terminal-green);
            min-height: 44px;
            flex-shrink: 0;
        }
        .editor-toolbar {
            display: flex;
            gap: 10px;
            padding: 10px 15px;
            background-color: var(--terminal-gray);
            border-bottom: 1px solid var(--terminal-medium-gray);
            align-items: center;
            flex-wrap: wrap;
            min-height: 50px;
            flex-shrink: 0;
        }
        .editor-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: var(--terminal-black);
            display: flex;
        }
        .editor {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            resize: none;
            background-color: transparent;
            color: var(--terminal-green);
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            line-height: 1.5;
        }
        .preview {
            line-height: 1.6;
            font-size: 0.95rem;
            font-family: 'Courier New', monospace;
            color: var(--terminal-green);
            flex: 1;
            overflow-y: auto;
        }
        
        /* === GUIDE STYLES === */
        .guide-content {
            padding: 20px;
            line-height: 1.6;
        }
        .guide-section {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid var(--terminal-medium-gray);
            border-radius: 5px;
        }
        .guide-section h3 {
            color: var(--terminal-yellow);
            margin-bottom: 10px;
            border-bottom: 1px solid var(--terminal-medium-gray);
            padding-bottom: 5px;
        }
        .guide-section p {
            margin-bottom: 8px;
        }
        .guide-feature-list {
            list-style-type: none;
            margin-left: 20px;
        }
        .guide-feature-list li {
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }
        .guide-feature-list li:before {
            content: "▶";
            color: var(--terminal-green);
            position: absolute;
            left: 0;
        }
        
        /* === ENHANCED DRAW STYLES for MOBILE === */
        .draw-tools {
            display: flex;
            gap: 8px;
            padding: 10px;
            background: var(--terminal-gray);
            border-bottom: 1px solid var(--terminal-medium-gray);
            flex-wrap: wrap;
            flex-shrink: 0;
            justify-content: center;
            align-items: center;
        }
        .tool-group {
            display: flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }
        .draw-tool {
            width: 44px;
            height: 44px;
            background: var(--terminal-light-gray);
            border: 1px solid var(--terminal-medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--terminal-green);
            -webkit-user-select: none;
            user-select: none;
            border-radius: 4px;
            transition: all 0.1s;
        }
        .draw-tool.active {
            background: var(--terminal-green);
            color: black;
            transform: scale(1.05);
            box-shadow: 0 0 8px var(--terminal-green);
        }
        .draw-tool:active {
            transform: scale(0.95);
        }
        .tool-size {
            margin-left: 5px;
            border-left: 1px solid var(--terminal-medium-gray);
            padding-left: 10px;
        }
        .size-option {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--terminal-light-gray);
            border: 1px solid var(--terminal-medium-gray);
            cursor: pointer;
            transition: all 0.1s;
        }
        .size-option.active {
            background: var(--terminal-green);
            border-color: var(--terminal-green);
            transform: scale(1.1);
            box-shadow: 0 0 6px var(--terminal-green);
        }
        .size-option:active {
            transform: scale(0.9);
        }
        .size-option.small {
            width: 18px;
            height: 18px;
        }
        .size-option.medium {
            width: 24px;
            height: 24px;
        }
        .size-option.large {
            width: 30px;
            height: 30px;
        }
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: auto;
            touch-action: none; /* Prevent browser gestures */
            background: black;
            min-height: 400px;
        }
        #drawCanvas {
            background: black;
            display: block;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }
        #gridOverlay {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            display: none;
            background-image: 
                linear-gradient(rgba(0, 255, 0, 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.15) 1px, transparent 1px);
            background-size: 20px 20px;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .color-presets {
            display: flex;
            gap: 5px;
            align-items: center;
            flex-wrap: wrap;
        }
        .color-preset {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            border: 2px solid var(--terminal-medium-gray);
            cursor: pointer;
            transition: transform 0.1s;
        }
        .color-preset:active {
            transform: scale(0.9);
        }
        .color-preset.active {
            border-color: var(--terminal-yellow);
            transform: scale(1.1);
            box-shadow: 0 0 8px var(--terminal-yellow);
        }
        
        /* === ENHANCED MOBILE ONE-CLICK CONTROLS === */
        .mobile-quick-actions {
            display: none;
            position: fixed;
            bottom: 40px;
            right: 10px;
            z-index: 999;
            flex-direction: column;
            gap: 8px;
        }
        .mobile-action-btn {
            width: 50px;
            height: 50px;
            background: rgba(30, 30, 30, 0.9);
            border: 2px solid var(--terminal-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--terminal-green);
            font-size: 1.2rem;
            cursor: pointer;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            transition: all 0.2s;
        }
        .mobile-action-btn:active {
            transform: scale(0.9);
            background: var(--terminal-green);
            color: black;
        }
        
        /* === RESPONSIVE TOUCH ENHANCEMENTS === */
        @media (max-width: 768px) {
            /* Mobile-optimized draw tools */
            .draw-tools {
                gap: 6px;
                padding: 8px;
                justify-content: space-around;
            }
            
            .draw-tool {
                width: 56px;
                height: 56px;
                font-size: 1.4rem;
                border-radius: 8px;
            }
            
            .size-option {
                width: 32px;
                height: 32px;
                margin: 0 4px;
            }
            
            .tool-group {
                margin-bottom: 8px;
                justify-content: center;
            }
            
            #colorPicker {
                width: 56px;
                height: 56px;
                border-radius: 8px;
            }
            
            .btn {
                min-height: 48px;
                padding: 12px 18px;
                font-size: 1rem;
                border-radius: 8px;
            }
            
            /* Larger touch targets for mobile */
            .desktop-icon {
                min-width: 100px;
                min-height: 100px;
                padding: 15px;
                font-size: 1rem;
            }
            
            .desktop-icon i {
                font-size: 48px;
                margin-bottom: 10px;
            }
            
            .desktop-icon:active, .task-icon:active, .draw-tool:active {
                opacity: 0.7;
                transform: scale(0.95);
                transition: transform 0.1s;
            }
            
            .desktop-icon {
                width: 80px;
                font-size: 0.8rem;
            }
            .desktop-icon i {
                font-size: 32px;
            }
            .webxos-logo {
                font-size: 3rem;
            }
            .webxos-subtitle {
                font-size: 1.2rem;
            }
            .loading-bar {
                width: 280px;
                height: 16px;
            }
            .kernel-body {
                flex-direction: column;
                grid-template-columns: 1fr;
            }
            .kernel-panel {
                min-height: 40vh;
            }
            .win95-window {
                min-width: 96vw;
                min-height: 70vh;
                left: 2vw;
                top: 5vh;
                max-height: 90vh;
                border-width: 3px;
            }
            /* DRAW WINDOW LARGER ON MOBILE */
            #drawWindow {
                width: 96vw;
                height: 85vh;
                top: 5vh;
                left: 2vw;
            }
            .title-bar {
                min-height: 48px;
                padding: 12px 14px;
                font-size: 1.1rem;
            }
            .title-bar button {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            .top-taskbar {
                height: 50px;
            }
            .task-icon {
                width: 48px;
                height: 48px;
                font-size: 1.2rem;
            }
            .start-btn {
                padding: 8px 18px;
                min-height: 48px;
                font-size: 1.1rem;
            }
            .top-clock {
                font-size: 1rem;
                padding: 0 10px;
            }
            .bottom-metrics {
                height: 44px;
                padding: 0 12px;
                font-size: 0.8rem;
                gap: 18px;
                justify-content: center;
            }
            .editor-container {
                flex-direction: column;
            }
            .editor-panel:first-child {
                flex: 1;
            }
            .editor-panel {
                border-right: none;
                border-bottom: 1px solid var(--terminal-medium-gray);
                min-height: 45vh;
            }
            .editor-panel:last-child {
                border-bottom: none;
            }
            .desktop {
                margin-top: 50px;
                margin-bottom: 44px;
            }
            
            /* Show mobile quick actions */
            .mobile-quick-actions {
                display: flex;
            }
            
            /* Color presets for mobile */
            .color-presets {
                display: flex;
                gap: 6px;
                padding: 5px;
                background: rgba(30, 30, 30, 0.8);
                border-radius: 8px;
            }
            .color-preset {
                width: 36px;
                height: 36px;
            }
            
            /* Grid overlay more visible on mobile */
            #gridOverlay {
                background-image: 
                    linear-gradient(rgba(0, 255, 0, 0.2) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(0, 255, 0, 0.2) 1px, transparent 1px);
            }
        }
        
        @media (max-width: 480px) {
            .bottom-metrics {
                flex-wrap: wrap;
                height: 50px;
                padding: 5px 8px;
                gap: 10px;
                justify-content: space-around;
            }
            .metric-item {
                flex: 0 0 auto;
            }
            .taskbar-icons {
                gap: 3px;
            }
            .task-icon {
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }
            .top-clock {
                font-size: 0.9rem;
                padding: 0 6px;
            }
            .draw-tool {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }
            #drawWindow {
                height: 88vh;
                top: 3vh;
            }
            .mobile-action-btn {
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }
        }
        
        @media (max-width: 360px) {
            .draw-tools {
                gap: 4px;
                padding: 6px;
            }
            .draw-tool {
                width: 46px;
                height: 46px;
                font-size: 1.2rem;
            }
            .tool-group {
                gap: 3px;
            }
        }
    </style>
</head>
<body>
    <!-- TOP TASKBAR (like original) -->
    <div class="top-taskbar" id="topTaskbar" style="display: none;">
        <button type="button" class="start-btn" id="startBtn" aria-label="Open webXOS Start Menu">webXOS</button>
        <div class="taskbar-icons">
            <div class="task-icon" id="writeIcon" aria-label="Write Application"><i class="fas fa-edit"></i></div>
            <div class="task-icon" id="drawIcon" aria-label="Draw Application"><i class="fas fa-paint-brush"></i></div>
            <div class="task-icon" id="kernelIcon" aria-label="Kernel Operations"><i class="fas fa-microchip"></i></div>
            <div class="task-icon active" id="guideIcon" aria-label="Guide and Help"><i class="fas fa-book"></i></div>
            <div class="task-icon" id="gamesIcon" aria-label="Games"><i class="fas fa-gamepad"></i></div>
        </div>
        <div class="top-clock" id="topClock"></div>
    </div>

    <!-- BOTTOM METRICS BAR -->
    <div class="bottom-metrics" id="bottomMetrics" style="display: none;">
        <div class="metric-item">
            <div class="metric-led" id="gpuStatusLed"></div>
            <span class="metric-label">GPU:</span>
            <span class="metric-value" id="gpuStatusText">INIT</span>
        </div>
        <div class="metric-item">
            <div class="metric-led" id="tfStatusLed"></div>
            <span class="metric-label">TF:</span>
            <span class="metric-value" id="tfStatusText">INIT</span>
        </div>
        <div class="metric-item">
            <span class="metric-label">MEM:</span>
            <span class="metric-value" id="memoryUsage">0MB</span>
        </div>
        <div class="metric-item">
            <span class="metric-label">KERNEL:</span>
            <span class="metric-value" id="kernelStatus">IDLE</span>
        </div>
    </div>

    <!-- NEURAL DOT GALAXY BACKGROUND -->
    <canvas id="galaxyCanvas"></canvas>
    
    <!-- MOBILE QUICK ACTIONS -->
    <div class="mobile-quick-actions" id="mobileQuickActions">
        <div class="mobile-action-btn" id="mobileClearBtn" title="Clear Canvas">
            <i class="fas fa-trash"></i>
        </div>
        <div class="mobile-action-btn" id="mobileUndoBtn" title="Undo">
            <i class="fas fa-undo"></i>
        </div>
        <div class="mobile-action-btn" id="mobileGridBtn" title="Toggle Grid">
            <i class="fas fa-th"></i>
        </div>
        <div class="mobile-action-btn" id="mobileExportBtn" title="Export Drawing">
            <i class="fas fa-download"></i>
        </div>
    </div>
    
    <!-- ENHANCED LOADING SCREEN -->
    <div class="loading-screen" id="loadingScreen">
        <div class="webxos-logo">webXOS</div>
        <div class="webxos-subtitle">web based operating system</div>
        <div class="loading-bar"><div class="loading-fill" id="loadingFill"></div></div>
    </div>
    
    <!-- DESKTOP -->
    <div class="desktop" id="desktop" style="display: none;">
        <!-- Desktop icons will be dynamically created -->
    </div>

    <!-- KERNEL OPS WINDOW -->
    <div class="win95-window" id="kernelWindow">
        <div class="title-bar">
            <span>KernelOps Agent</span>
            <div>
                <button type="button" id="maxKernel" aria-label="Maximize Kernel Window">□</button>
                <button type="button" id="closeKernel" aria-label="Close Kernel Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div class="kernel-ops-container">
                <div class="kernel-header">
                    <span>KernelOps Agent</span>
                    <div>
                        <button type="button" class="btn btn-primary" id="startKernelTest">
                            <i class="fas fa-play"></i> Start Test
                        </button>
                    </div>
                </div>
                
                <div class="kernel-toolbar">
                    <div class="format-controls">
                        <select class="font-size-selector" id="testType">
                            <option value="matrix">Matrix Multiplication</option>
                            <option value="gpu">GPU.js Test</option>
                            <option value="tf">TensorFlow.js Test</option>
                        </select>
                        <select class="font-size-selector" id="matrixSize">
                            <option value="64">64x64</option>
                            <option value="128">128x128</option>
                            <option value="256" selected>256x256</option>
                            <option value="512">512x512</option>
                            <option value="1024">1024x1024</option>
                        </select>
                    </div>
                    <button type="button" class="btn" id="exportKernelData">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                    <button type="button" class="btn" id="clearKernelLog">
                        <i class="fas fa-eraser"></i> Clear Log
                    </button>
                </div>
                
                <div class="kernel-body">
                    <div class="kernel-panel">
                        <div class="kernel-panel-title">Configuration</div>
                        <div class="agent-controls-grid">
                            <div class="control-group">
                                <div class="control-label">
                                    <span>Matrix Size:</span>
                                    <span id="matrixSizeValue">256</span>
                                </div>
                                <input type="range" id="matrixSlider" min="64" max="1024" value="256" step="64" />
                            </div>
                            <div class="control-group">
                                <div class="control-label">
                                    <span>Memory Limit (MB):</span>
                                    <span id="memoryLimitValue">512</span>
                                </div>
                                <input type="range" id="memorySlider" min="128" max="2048" value="512" step="64" />
                            </div>
                            <div class="control-group">
                                <div class="control-label">
                                    <span>Iterations:</span>
                                    <span id="iterationsValue">10</span>
                                </div>
                                <input type="range" id="iterationsSlider" min="1" max="100" value="10" />
                            </div>
                            <div class="control-group">
                                <div class="control-label">
                                    <span>Agent Mode:</span>
                                </div>
                                <select id="agentMode" class="btn" style="width: 100%;">
                                    <option value="gpu">GPU Accelerated</option>
                                    <option value="cpu">CPU Only</option>
                                    <option value="auto">Auto-detect</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="kernel-panel-title">Agent Status</div>
                        <div class="kernel-stats">
                            <div class="stat-item">
                                <div class="stat-label">Status</div>
                                <div class="stat-value" id="agentStatus">IDLE</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Mode</div>
                                <div class="stat-value" id="agentModeValue">GPU</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Tests</div>
                                <div class="stat-value" id="testsCount">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Avg Time</div>
                                <div class="stat-value" id="avgTime">0ms</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; display: flex; gap: 10px;">
                            <button type="button" class="btn btn-primary" id="singleTest">Single Test</button>
                            <button type="button" class="btn" id="continuousTest">Continuous</button>
                            <button type="button" class="btn" id="stopTest" style="display:none">Stop</button>
                        </div>
                    </div>
                    
                    <div class="kernel-panel">
                        <div class="kernel-panel-title">Test Output</div>
                        <div class="kernel-output" id="kernelOutput">
                            &gt; Kernel Agent Initialized<br />
                            &gt; GPU.js: Loading...<br />
                            &gt; TensorFlow.js: Loading...<br />
                            &gt; Adjust settings and start test<br />
                        </div>
                        
                        <div class="kernel-panel-title" style="margin-top: 15px;">Performance Metrics</div>
                        <div class="kernel-stats">
                            <div class="stat-item">
                                <div class="stat-label">Matrix Ops</div>
                                <div class="stat-value" id="matrixOps">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Time</div>
                                <div class="stat-value" id="totalTime">0ms</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Memory Used</div>
                                <div class="stat-value" id="memoryUsed">0MB</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Errors</div>
                                <div class="stat-value" id="errorCount">0</div>
                            </div>
                        </div>
                        
                        <div class="kernel-panel-title" style="margin-top: 15px;">Resource Usage</div>
                        <div style="margin-top: 10px;">
                            <div class="control-label">
                                <span>Memory Usage:</span>
                                <span id="currentMemory">0MB / 512MB</span>
                            </div>
                            <div style="width: 100%; height: 10px; background: var(--terminal-light-gray); border-radius: 5px; overflow: hidden;">
                                <div id="memoryBar" style="width: 0%; height: 100%; background: var(--terminal-green);"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- WRITE WINDOW WITH LARGER EDITOR -->
    <div class="win95-window" id="writeWindow">
        <div class="title-bar">
            <span>webXOS Write</span>
            <div>
                <button type="button" id="maxWrite" aria-label="Maximize Write Window">□</button>
                <button type="button" id="closeWrite" aria-label="Close Write Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div class="editor-container">
                <div class="editor-panel">
                    <div class="editor-header">
                        <span>Markdown Editor (60%)</span>
                        <button type="button" class="btn" id="clearWriteBtn">
                            <i class="fas fa-eraser"></i>
                            Clear
                        </button>
                    </div>
                    <div class="editor-toolbar">
                        <div class="format-controls">
                            <select class="font-selector" id="fontSelector">
                                <option value="default">Default Font</option>
                                <option value="times">Times New Roman</option>
                                <option value="arial">Arial</option>
                            </select>
                            <select class="font-size-selector" id="fontSizeSelector">
                                <option value="12">12px</option>
                                <option value="14">14px</option>
                                <option value="16" selected>16px</option>
                                <option value="18">18px</option>
                                <option value="20">20px</option>
                                <option value="24">24px</option>
                            </select>
                            <input type="color" class="color-selector" id="colorSelector" value="#00FF00" />
                        </div>
                        <button type="button" class="btn" id="exportWriteBtn">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                    <div class="editor-body">
                        <textarea class="editor" id="markdownEditor" placeholder="Start writing your Markdown here..." spellcheck="false"># Welcome to webXOS Write
A powerful Markdown editor integrated into the webXOS operating system.

## Features
- **Markdown Support** - Write with full Markdown syntax
- **Live Preview** - See your formatted content as you type
- **Export Options** - Save your work in multiple formats
- **Terminal Styling** - Consistent with webXOS design

## Mobile Enhancements
- Touch-optimized interface
- Responsive layout for all screen sizes
- Enhanced contrast for better readability
- Larger editor area for easier typing

## Markdown Tips
- Use # for headings
- Use **bold** and *italic* text
- Create lists with - or 1. 2. 3.
- Add [links](https://example.com)
- Insert `code` and code blocks

## Try It Out
Start typing your content here. The preview will update automatically!</textarea>
                    </div>
                </div>
                <div class="editor-panel">
                    <div class="editor-header">
                        <span>Live Preview (40%)</span>
                        <button type="button" class="btn" id="refreshPreviewBtn">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                    <div class="editor-body">
                        <div class="preview" id="markdownPreview"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ENHANCED DRAW WINDOW with MOBILE SUPPORT -->
    <div class="win95-window" id="drawWindow">
        <div class="title-bar">
            <span>webXOS Draw</span>
            <div>
                <button type="button" id="maxDraw" aria-label="Maximize Draw Window">□</button>
                <button type="button" id="closeDraw" aria-label="Close Draw Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div class="draw-tools">
                <div class="tool-group">
                    <div class="draw-tool active" data-tool="pencil" title="Pencil">
                        <i class="fas fa-pencil-alt"></i>
                    </div>
                    <div class="draw-tool" data-tool="line" title="Line">
                        <i class="fas fa-minus"></i>
                    </div>
                </div>
                <div class="tool-group">
                    <div class="draw-tool" data-tool="rectangle" title="Rectangle">
                        <i class="fas fa-square"></i>
                    </div>
                    <div class="draw-tool" data-tool="circle" title="Circle">
                        <i class="fas fa-circle"></i>
                    </div>
                    <div class="draw-tool" data-tool="triangle" title="Triangle">
                        <i class="fas fa-play"></i>
                    </div>
                </div>
                <div class="tool-group">
                    <div class="draw-tool" data-tool="eraser" title="Eraser">
                        <i class="fas fa-eraser"></i>
                    </div>
                    <div class="draw-tool" data-tool="eyedropper" title="Sample Color">
                        <i class="fas fa-eye-dropper"></i>
                    </div>
                    <div class="draw-tool" id="undoDraw" title="Undo">
                        <i class="fas fa-undo"></i>
                    </div>
                    <div class="draw-tool" id="toggleGrid" title="Toggle Grid">
                        <i class="fas fa-th"></i>
                    </div>
                    <div class="draw-tool" id="clearCanvas" title="Clear Canvas">
                        <i class="fas fa-trash"></i>
                    </div>
                </div>
                <div class="tool-group">
                    <input type="color" id="colorPicker" value="#00FF00" title="Color" />
                </div>
                <div class="tool-group tool-size">
                    <div class="size-option small active" data-size="2"></div>
                    <div class="size-option medium" data-size="5"></div>
                    <div class="size-option large" data-size="10"></div>
                </div>
                <div class="tool-group">
                    <button type="button" class="btn" id="exportDrawBtn">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                </div>
            </div>
            <!-- Color Presets for Mobile -->
            <div class="color-presets" style="display: none;">
                <div class="color-preset active" style="background: #00FF00;" data-color="#00FF00"></div>
                <div class="color-preset" style="background: #FF0000;" data-color="#FF0000"></div>
                <div class="color-preset" style="background: #0000FF;" data-color="#0000FF"></div>
                <div class="color-preset" style="background: #FFFF00;" data-color="#FFFF00"></div>
                <div class="color-preset" style="background: #FF00FF;" data-color="#FF00FF"></div>
                <div class="color-preset" style="background: #00FFFF;" data-color="#00FFFF"></div>
                <div class="color-preset" style="background: #FFFFFF;" data-color="#FFFFFF"></div>
                <div class="color-preset" style="background: #000000;" data-color="#000000"></div>
            </div>
            <div class="canvas-container">
                <canvas id="drawCanvas"></canvas>
                <div id="gridOverlay"></div>
            </div>
        </div>
    </div>

    <!-- GUIDE WINDOW -->
    <div class="win95-window" id="guideWindow">
        <div class="title-bar">
            <span>webXOS 2026 Edition</span>
            <div>
                <button type="button" id="maxGuide" aria-label="Maximize Guide Window">□</button>
                <button type="button" id="closeGuide" aria-label="Close Guide Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div class="guide-content" id="guideContent">
                <div class="guide-section">
                    <h3>Welcome to webXOS 2026</h3>
                    <p>Welcome to webXOS 2026 Edition with demoscene design and modular applications.</p>
                    <p>This version includes modular tools and agents designed for minimal systems.</p>
                    <p><strong>Features:</strong> A unique legacy design that ensures quick usage and old school quality.</p>
                </div>
                
                <div class="guide-section">
                    <h3>Interface Overview</h3>
                    <p><strong>Top Taskbar:</strong> Application shortcuts and clock (like original)</p>
                    <p><strong>Bottom Metrics:</strong> System status (GPU/TF status, memory usage, kernel status)</p>
                    <p><strong>Desktop:</strong> Application icons and active windows area</p>
                </div>
                
                <div class="guide-section">
                    <h3>Applications</h3>
                    <ul class="guide-feature-list">
                        <li><strong>Write:</strong> Markdown editor with larger editor area (60/40 split)</li>
                        <li><strong>Draw:</strong> Drawing application with touch support and mobile-optimized tools</li>
                        <li><strong>KernelOps:</strong> GPU/CPU matrix testing system with real-time performance metrics</li>
                        <li><strong>Games:</strong> Collection of browser-based games and simulations</li>
                        <li><strong>Tools:</strong> Various utilities including encryption, chat agents, and system tools</li>
                        <li><strong>Research:</strong> Information and knowledge base for advanced topics</li>
                        <li><strong>Links:</strong> Quick access to web resources and social media</li>
                    </ul>
                </div>
                
                <div class="guide-section">
                    <h3>Enhanced Drawing Features</h3>
                    <p><strong>Mobile Touch Support:</strong></p>
                    <ul class="guide-feature-list">
                        <li>Full touch support for drawing on mobile devices</li>
                        <li>Touch-optimized tool buttons (larger hit areas)</li>
                        <li>Prevent accidental scrolling while drawing</li>
                        <li>Responsive canvas that adapts to screen size</li>
                        <li>One-click controls for mobile devices</li>
                        <li>Color presets for quick color selection</li>
                    </ul>
                    <p><strong>Grid Feature:</strong></p>
                    <ul class="guide-feature-list">
                        <li>Toggle grid overlay for precise drawing</li>
                        <li>20x20 pixel grid pattern</li>
                        <li>Subtle green grid lines for terminal aesthetic</li>
                    </ul>
                </div>
                
                <div class="guide-section">
                    <h3>Enhanced Write Application</h3>
                    <p><strong>Larger Editor Area:</strong> Editor now takes 60% of window, preview 40%</p>
                    <p><strong>Features:</strong></p>
                    <ul class="guide-feature-list">
                        <li>Real-time Markdown preview</li>
                        <li>Font and color customization</li>
                        <li>Auto-save functionality</li>
                        <li>Export to Markdown format</li>
                        <li>Responsive design for all screen sizes</li>
                    </ul>
                </div>
                
                <div class="guide-section">
                    <h3>System Requirements</h3>
                    <p><strong>Minimum:</strong> Modern browser with JavaScript enabled</p>
                    <p><strong>Recommended:</strong> Browser with WebGL support for GPU acceleration</p>
                    <p><strong>Memory:</strong> 512MB+ for large matrix operations</p>
                    <p><strong>Mobile:</strong> iOS Safari 12+, Chrome for Android 60+</p>
                </div>
            </div>
        </div>
    </div>

    <!-- GAMES WINDOW -->
    <div class="win95-window" id="gamesWindow">
        <div class="title-bar">
            <span>webXOS Games</span>
            <div>
                <button type="button" id="maxGames" aria-label="Maximize Games Window">□</button>
                <button type="button" id="closeGames" aria-label="Close Games Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 10px;">
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/chess.html', '_blank')" aria-label="AI Chess Game">
                    <i class="fas fa-chess"></i>
                    <div>AI CHESS</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/paintball.html', '_blank')" aria-label="Paintball Game">
                    <i class="fas fa-crosshairs"></i>
                    <div>PAINTBALL</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/codecrunch.html', '_blank')" aria-label="Code Crunch Game">
                    <i class="fas fa-code"></i>
                    <div>CODE CRUNCH</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/command.html', '_blank')" aria-label="Command and Quantify Game">
                    <i class="fas fa-atom"></i>
                    <div>COMMAND AND QUANTIFY</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/dronefall.html', '_blank')" aria-label="Drone Fall Game">
                    <i class="fas fa-space-shuttle"></i>
                    <div>DRONE FALL</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/emojiquest.html', '_blank')" aria-label="Emoji Quest Game">
                    <i class="fas fa-shield"></i>
                    <div>EMOJI QUEST</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/spacecraft.html', '_blank')" aria-label="Galaxycraft Game">
                    <i class="fas fa-jet-fighter"></i>
                    <div>SPACECRAFT</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/3deditor.html', '_blank')" aria-label="3D Editor Game">
                    <i class="fas fa-tint"></i>
                    <div>3D EDITOR</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/trios.html', '_blank')" aria-label="Trios Game">
                    <i class="fas fa-university"></i>
                    <div>TRIOS</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/xforc3d.html', '_blank')" aria-label="Xforc3D Game">
                    <i class="fas fa-times"></i>
                    <div>XFORC3D</div>
                </div>
            </div>
        </div>
    </div>

    <!-- TOOLS WINDOW -->
    <div class="win95-window" id="toolsWindow">
        <div class="title-bar">
            <span>webXOS Tools</span>
            <div>
                <button type="button" id="maxTools" aria-label="Maximize Tools Window">□</button>
                <button type="button" id="closeTools" aria-label="Close Tools Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 10px;">
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/atomic.html', '_blank')" aria-label="Global Atomic Clock Tool">
                    <i class="fas fa-clock"></i>
                    <div>GLOBAL ATOMIC CLOCK</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/arcr.html', '_blank')" aria-label="Prompt Agent Tool">
                    <i class="fas fa-robot"></i>
                    <div>PROMPT AGENT</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/exoskeleton.html', '_blank')" aria-label="Encryption Agent Tool">
                    <i class="fas fa-robot"></i>
                    <div>ENCRYPTION AGENT</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/booki.html', '_blank')" aria-label="Book Agent Tool">
                    <i class="fas fa-robot"></i>
                    <div>BOOK AGENT</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/chatbot.html', '_blank')" aria-label="Chat Agent Tool">
                    <i class="fas fa-robot"></i>
                    <div>CHAT AGENT</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/sacred.html', '_blank')" aria-label="2D Image Agent Tool">
                    <i class="fas fa-robot"></i>
                    <div>2D IMAGE AGENT</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/codesign.html', '_blank')" aria-label="Signature Encryption Tool">
                    <i class="fas fa-signature"></i>
                    <div>SIGNATURE ENCRYPTION</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/gridlocker.html', '_blank')" aria-label="File Encryption Tool">
                    <i class="fas fa-lock"></i>
                    <div>FILE ENCRYPTION</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/injector.html', '_blank')" aria-label="PY Terminal Tool">
                    <i class="fas fa-code"></i>
                    <div>PY TERMINAL</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/lattest.html', '_blank')" aria-label="Latency Test Tool">
                    <i class="fas fa-signal"></i>
                    <div>LATENCY TEST</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/mirror.html', '_blank')" aria-label="Drone Sim Tool">
                    <i class="fas fa-toggle-on"></i>
                    <div>DRONE SIM</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/KERNELOPS.html', '_blank')" aria-label="KERNELOPS Tool">
                    <i class="fas fa-spinner"></i>
                    <div>KERNELOPS</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/tempserver.html', '_blank')" aria-label="Local Server Tool">
                    <i class="fas fa-server"></i>
                    <div>LOCAL SERVER</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/watchdog.html', '_blank')" aria-label="Energy Metrics Tool">
                    <i class="fas fa-tachometer"></i>
                    <div>ENERGY METRICS</div>
                </div>
            </div>
        </div>
    </div>

    <!-- RESEARCH WINDOW -->
    <div class="win95-window" id="researchWindow">
        <div class="title-bar">
            <span>webXOS Research</span>
            <div>
                <button type="button" id="maxResearch" aria-label="Maximize Research Window">□</button>
                <button type="button" id="closeResearch" aria-label="Close Research Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 10px;">
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/anything.html', '_blank')" aria-label="Anything: Point Cloud Research">
                    <i class="fas fa-search"></i>
                    <div>ANYTHING: POINT CLOUD</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/VIAL.html', '_blank')" aria-label="VIAL Research">
                    <i class="fas fa-flask"></i>
                    <div>VIAL</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/launch.html', '_blank')" aria-label="QNN Drone Training Research">
                    <i class="fas fa-map"></i>
                    <div>QNN DRONE TRAINING</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/greenstudy.html', '_blank')" aria-label="Carbon Stat Sheet Research">
                    <i class="fas fa-leaf"></i>
                    <div>CARBON STAT SHEET</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/farm.html', '_blank')" aria-label="QNN Farm Robot Training Research">
                    <i class="fas fa-water"></i>
                    <div>QNN FARM ROBOT TRAINING</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/microseek.html', '_blank')" aria-label="Radical Research">
                    <i class="fas fa-lightbulb"></i>
                    <div>MICROSEEK OS</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/tokenforged.html', '_blank')" aria-label="Token Forged Research">
                    <i class="fas fa-network-wired"></i>
                    <div>Token Forged</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/mlm.html', '_blank')" aria-label="Micro LMs Research">
                    <i class="fas fa-brain"></i>
                    <div>Micro LMs</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/greencodeinfo.html', '_blank')" aria-label="Green Coding Research">
                    <i class="fas fa-code"></i>
                    <div>Green Coding</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/regeninfo.html', '_blank')" aria-label="Regenerative Data Research">
                    <i class="fas fa-recycle"></i>
                    <div>Regenerative Data</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/promptguide.html', '_blank')" aria-label="Prompt Guide Research">
                    <i class="fas fa-book-open"></i>
                    <div>Prompt Guide</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/promptinjection.html', '_blank')" aria-label="Prompt Injection Research">
                    <i class="fas fa-syringe"></i>
                    <div>Prompt Injection</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/gem.html', '_blank')" aria-label="Global Entity Map Research">
                    <i class="fas fa-globe"></i>
                    <div>Global Entity Map</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/editor.html', '_blank')" aria-label="Editor Research">
                    <i class="fas fa-scroll"></i>
                    <div>Editor</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/clipboard.html', '_blank')" aria-label="Markdown as a Medium Research">
                    <i class="fas fa-file"></i>
                    <div>Prompt Clipboard</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/drone.html', '_blank')" aria-label="Drone Tech Research">
                    <i class="fas fa-rocket"></i>
                    <div>Drone Tech</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/subm.html', '_blank')" aria-label="Submarine Tech Research">
                    <i class="fas fa-water"></i>
                    <div>Submarine Tech</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://webxos.netlify.app/subt.html', '_blank')" aria-label="Subterrain Tech Research">
                    <i class="fas fa-mountain"></i>
                    <div>Subterrain Tech</div>
                </div>
            </div>
        </div>
    </div>

    <!-- LINKS WINDOW (original) -->
    <div class="win95-window" id="linksWindow">
        <div class="title-bar">
            <span>webXOS Links</span>
            <div>
                <button type="button" id="maxLinks" aria-label="Maximize Links Window">□</button>
                <button type="button" id="closeLinks" aria-label="Close Links Window">×</button>
            </div>
        </div>
        <div class="window-content">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 10px;">
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://x.com/webxos', '_blank')" aria-label="webXOS Twitter">
                    <i class="fab fa-twitter"></i>
                    <div>x.com/webxos</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://x.com/galaxycraft3d', '_blank')" aria-label="Galaxycraft 3D Twitter">
                    <i class="fab fa-twitter"></i>
                    <div>x.com/galaxycraft3d</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://github.com/webxos', '_blank')" aria-label="GitHub Repository">
                    <i class="fab fa-github"></i>
                    <div>GitHub</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://kick.com/webxos', '_blank')" aria-label="Kick Stream">
                    <i class="fas fa-video"></i>
                    <div>Kick</div>
                </div>
                <div class="desktop-icon" style="position: relative; width: 100%; height: 80px;" onclick="window.open('https://www.tiktok.com/@webxos', '_blank')" aria-label="TikTok Account">
                    <i class="fab fa-tiktok"></i>
                    <div>TikTok</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === ENHANCED NEURAL DOT GALAXY BACKGROUND with mobile optimization ===
        const galaxyCanvas = document.getElementById('galaxyCanvas');
        const galaxyCtx = galaxyCanvas.getContext('2d');
        let dots = [];
        let animationId = null;
        let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        
        function resizeGalaxyCanvas() {
            galaxyCanvas.width = window.innerWidth;
            galaxyCanvas.height = window.innerHeight;
            initDots();
        }
        
        function initDots() {
            dots = [];
            const dotCount = isMobile ? 
                Math.floor((galaxyCanvas.width * galaxyCanvas.height) / 10000) :
                Math.floor((galaxyCanvas.width * galaxyCanvas.height) / 5000);
           
            for (let i = 0; i < dotCount; i++) {
                dots.push({
                    x: Math.random() * galaxyCanvas.width,
                    y: Math.random() * galaxyCanvas.height,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 0.5 + 0.1,
                    color: Math.random() > 0.7 ? '#00FF00' : '#FFFFFF'
                });
            }
        }
        
        function drawDots() {
            galaxyCtx.clearRect(0, 0, galaxyCanvas.width, galaxyCanvas.height);
           
            for (let i = 0; i < dots.length; i++) {
                const dot = dots[i];
               
                galaxyCtx.beginPath();
                galaxyCtx.arc(dot.x, dot.y, dot.size, 0, Math.PI * 2);
                galaxyCtx.fillStyle = dot.color;
                galaxyCtx.fill();
               
                dot.y += dot.speed;
               
                if (dot.y > galaxyCanvas.height) {
                    dot.y = 0;
                    dot.x = Math.random() * galaxyCanvas.width;
                }
            }
           
            animationId = requestAnimationFrame(drawDots);
        }

        window.addEventListener('resize', resizeGalaxyCanvas);
        resizeGalaxyCanvas();
        if (!isMobile) {
            drawDots();
        } else {
            setTimeout(drawDots, 1000);
        }

        // === ENHANCED LOADING ANIMATION ===
        document.addEventListener('DOMContentLoaded', function() {
            const loadingFill = document.getElementById('loadingFill');
            const loadingScreen = document.getElementById('loadingScreen');
            const topTaskbar = document.getElementById('topTaskbar');
            const bottomMetrics = document.getElementById('bottomMetrics');
            const desktop = document.getElementById('desktop');
           
            let loadProgress = 0;
            const loadInterval = setInterval(() => {
                loadProgress += 2;
                loadingFill.style.width = loadProgress + '%';
               
                if (loadProgress % 10 === 0) {
                    loadingFill.style.boxShadow = `0 0 ${10 + loadProgress/5}px var(--terminal-green), 0 0 ${20 + loadProgress/3}px var(--terminal-green)`;
                }
               
                if (loadProgress >= 100) {
                    clearInterval(loadInterval);
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                        topTaskbar.style.display = 'flex';
                        bottomMetrics.style.display = 'flex';
                        desktop.style.display = 'flex';
                        initializeOS();
                    }, 800);
                }
            }, 40);
        });

        // === TOP TASKBAR CLOCK ===
        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            document.getElementById('topClock').textContent = time;
        }

        // === FIXED ENHANCED KERNEL AGENT SYSTEM ===
        class KernelAgent {
            constructor() {
                this.gpu = null;
                this.tf = null;
                this.status = 'idle';
                this.mode = 'gpu';
                this.testsCompleted = 0;
                this.totalOperations = 0;
                this.totalTime = 0;
                this.errors = 0;
                this.isContinuous = false;
                this.testLog = [];
                this.memoryLimit = 512;
                this.currentMemory = 0;
                
                this.initialize();
            }

            async initialize() {
                try {
                    // Check if GPU is available
                    if (typeof GPU !== 'undefined') {
                        this.gpu = new GPU();
                        document.getElementById('gpuStatusLed').classList.add('active');
                        document.getElementById('gpuStatusText').textContent = 'OK';
                        this.log('GPU.js initialized successfully');
                    } else {
                        throw new Error('GPU.js not loaded');
                    }
                } catch (error) {
                    document.getElementById('gpuStatusLed').classList.add('inactive');
                    document.getElementById('gpuStatusText').textContent = 'ERR';
                    this.mode = 'cpu';
                    this.log(`GPU.js Error: ${error.message}`, 'error');
                }

                try {
                    // Check if TensorFlow is available
                    if (typeof tf !== 'undefined') {
                        this.tf = tf;
                        if (this.mode === 'cpu') {
                            await tf.setBackend('cpu');
                        }
                        await tf.ready();
                        document.getElementById('tfStatusLed').classList.add('active');
                        document.getElementById('tfStatusText').textContent = 'OK';
                        this.log('TensorFlow.js initialized successfully');
                    } else {
                        throw new Error('TensorFlow.js not loaded');
                    }
                } catch (error) {
                    document.getElementById('tfStatusLed').classList.add('inactive');
                    document.getElementById('tfStatusText').textContent = 'ERR';
                    this.log(`TensorFlow.js Error: ${error.message}`, 'error');
                }

                this.updateUI();
                this.updateMetricsBar();
                this.log('Kernel Agent ready');
            }

            async runTest() {
                if (this.status === 'testing') return;
                
                const size = parseInt(document.getElementById('matrixSize').value);
                this.memoryLimit = parseInt(document.getElementById('memorySlider').value);
                const iterations = parseInt(document.getElementById('iterationsSlider').value);
                this.mode = document.getElementById('agentMode').value;
                
                const estimatedMemory = (size * size * 8 * 2) / (1024 * 1024);
                if (estimatedMemory > this.memoryLimit) {
                    this.log(`Memory limit exceeded: ${estimatedMemory.toFixed(1)}MB > ${this.memoryLimit}MB`, 'error');
                    return;
                }
                
                this.status = 'testing';
                this.updateUI();
                this.updateMetricsBar();
                
                let totalTestTime = 0;
                let totalOps = 0;
                
                try {
                    for (let i = 0; i < iterations; i++) {
                        if (!this.isContinuous && this.status !== 'testing') break;
                        
                        const startTime = performance.now();
                        
                        if (this.mode === 'gpu' && this.gpu) {
                            await this.runGPUTest(size);
                        } else if (this.tf) {
                            await this.runTensorFlowTest(size);
                        } else {
                            await this.runCPUTest(size);
                        }
                        
                        const endTime = performance.now();
                        const testTime = endTime - startTime;
                        const operations = size * size * size;
                        
                        totalTestTime += testTime;
                        totalOps += operations;
                        
                        this.log(`Test ${i+1}: ${size}x${size} matrix in ${testTime.toFixed(2)}ms`);
                        
                        this.currentMemory = Math.min(this.memoryLimit, this.currentMemory + estimatedMemory * 0.1);
                        this.updateMemoryBar();
                        this.updateMetricsBar();
                        
                        if (i < iterations - 1) {
                            await new Promise(resolve => setTimeout(resolve, 100));
                        }
                    }
                    
                    this.testsCompleted += iterations;
                    this.totalOperations += totalOps;
                    this.totalTime += totalTestTime;
                    
                    const avgTime = totalTestTime / iterations;
                    this.log(`Completed ${iterations} tests, average: ${avgTime.toFixed(2)}ms`);
                    
                } catch (error) {
                    this.errors++;
                    this.log(`Test failed: ${error.message}`, 'error');
                } finally {
                    this.status = 'idle';
                    this.updateUI();
                    this.updateMetricsBar();
                    
                    if (this.isContinuous) {
                        setTimeout(() => this.runTest(), 500);
                    }
                }
            }

            async runGPUTest(size) {
                if (!this.gpu) throw new Error('GPU not available');
                
                // Create a simple matrix multiplication kernel
                const kernel = this.gpu.createKernel(function(a, b, size) {
                    let sum = 0;
                    for (let k = 0; k < size; k++) {
                        sum += a[this.thread.y][k] * b[k][this.thread.x];
                    }
                    return sum;
                }).setOutput([size, size]);
                
                // Create random matrices
                const a = [];
                const b = [];
                for (let i = 0; i < size; i++) {
                    a[i] = [];
                    b[i] = [];
                    for (let j = 0; j < size; j++) {
                        a[i][j] = Math.random();
                        b[i][j] = Math.random();
                    }
                }
                
                kernel(a, b, size);
            }

            async runTensorFlowTest(size) {
                if (!this.tf) throw new Error('TensorFlow not available');
                
                const a = tf.randomNormal([size, size]);
                const b = tf.randomNormal([size, size]);
                const result = tf.matMul(a, b);
                
                // Force execution by getting data
                await result.data();
                
                // Clean up memory
                a.dispose();
                b.dispose();
                result.dispose();
            }

            async runCPUTest(size) {
                // Simple CPU matrix multiplication
                const a = new Array(size);
                const b = new Array(size);
                const result = new Array(size);
                
                for (let i = 0; i < size; i++) {
                    a[i] = new Array(size);
                    b[i] = new Array(size);
                    result[i] = new Array(size).fill(0);
                    for (let j = 0; j < size; j++) {
                        a[i][j] = Math.random();
                        b[i][j] = Math.random();
                    }
                }
                
                // Perform multiplication
                for (let i = 0; i < size; i++) {
                    for (let j = 0; j < size; j++) {
                        let sum = 0;
                        for (let k = 0; k < size; k++) {
                            sum += a[i][k] * b[k][j];
                        }
                        result[i][j] = sum;
                    }
                }
                
                return result;
            }

            startContinuous() {
                this.isContinuous = true;
                document.getElementById('continuousTest').style.display = 'none';
                document.getElementById('stopTest').style.display = 'inline-block';
                this.runTest();
            }

            stopContinuous() {
                this.isContinuous = false;
                this.status = 'idle';
                document.getElementById('continuousTest').style.display = 'inline-block';
                document.getElementById('stopTest').style.display = 'none';
                this.updateUI();
                this.updateMetricsBar();
                this.log('Continuous testing stopped');
            }

            log(message, type = 'info') {
                const output = document.getElementById('kernelOutput');
                const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
                
                const color = type === 'error' ? '#FF0000' : '#00FF00';
                const line = `<span style="color: ${color}">[${timestamp}] ${message}</span><br />`;
                
                output.innerHTML += line;
                output.scrollTop = output.scrollHeight;
                
                const lines = output.innerHTML.split('<br />');
                if (lines.length > 20) {
                    output.innerHTML = lines.slice(-20).join('<br />');
                }
                
                this.testLog.push({ timestamp: new Date(), message, type });
            }

            updateUI() {
                document.getElementById('agentStatus').textContent = this.status.toUpperCase();
                document.getElementById('agentModeValue').textContent = this.mode.toUpperCase();
                document.getElementById('testsCount').textContent = this.testsCompleted;
                
                const avgTime = this.testsCompleted > 0 ? 
                    (this.totalTime / this.testsCompleted).toFixed(2) : '0';
                document.getElementById('avgTime').textContent = `${avgTime}ms`;
                
                document.getElementById('matrixOps').textContent = this.totalOperations.toLocaleString();
                document.getElementById('totalTime').textContent = `${this.totalTime.toFixed(0)}ms`;
                document.getElementById('memoryUsed').textContent = `${this.currentMemory.toFixed(1)}MB`;
                document.getElementById('errorCount').textContent = this.errors;
            }

            updateMetricsBar() {
                document.getElementById('kernelStatus').textContent = 
                    this.status === 'testing' ? 'TEST' : 'IDLE';
                document.getElementById('memoryUsage').textContent = 
                    `${this.currentMemory.toFixed(1)}MB`;
            }

            updateMemoryBar() {
                const percent = (this.currentMemory / this.memoryLimit) * 100;
                document.getElementById('memoryBar').style.width = `${percent}%`;
                document.getElementById('currentMemory').textContent = 
                    `${this.currentMemory.toFixed(1)}MB / ${this.memoryLimit}MB`;
            }

            exportData() {
                const timestamp = new Date().toISOString();
                let markdown = `# Kernel Agent Test Results\n\n`;
                markdown += `## Export Date: ${timestamp}\n`;
                markdown += `## Agent Configuration\n`;
                markdown += `- Mode: ${this.mode}\n`;
                markdown += `- Matrix Size: ${document.getElementById('matrixSize').value}\n`;
                markdown += `- Memory Limit: ${this.memoryLimit}MB\n`;
                markdown += `- Tests Completed: ${this.testsCompleted}\n\n`;
                
                markdown += `## Performance Metrics\n`;
                markdown += `- Total Operations: ${this.totalOperations.toLocaleString()}\n`;
                markdown += `- Total Time: ${this.totalTime.toFixed(2)}ms\n`;
                markdown += `- Average Time: ${this.testsCompleted > 0 ? (this.totalTime / this.testsCompleted).toFixed(2) : '0'}ms\n`;
                markdown += `- Errors: ${this.errors}\n\n`;
                
                markdown += `## Test Log\n`;
                this.testLog.slice(-20).forEach(log => {
                    markdown += `- [${log.timestamp.toLocaleTimeString()}] ${log.message}\n`;
                });
                
                const blob = new Blob([markdown], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `kernel_agent_results_${Date.now()}.md`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.log('Test data exported');
            }

            clearLog() {
                document.getElementById('kernelOutput').innerHTML = 
                    '> Log cleared<br />> Ready for new tests<br />';
                this.testLog = [];
                this.log('Test log cleared');
            }
        }

        // === COMPLETE DRAWING APPLICATION WITH ALL FEATURES ===
        class DrawApp {
            constructor() {
                this.canvas = document.getElementById('drawCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.container = this.canvas.parentElement;
                this.gridOverlay = document.getElementById('gridOverlay');
                
                this.isDrawing = false;
                this.lastX = 0;
                this.lastY = 0;
                this.currentTool = 'pencil';
                this.brushSize = 2;
                this.startX = 0;
                this.startY = 0;
                this.snapshot = null;
                this.history = [];
                this.currentStep = -1;
                this.isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                
                // Color presets
                this.colorPresets = [
                    '#00FF00', '#FF0000', '#0000FF', '#FFFF00', 
                    '#FF00FF', '#00FFFF', '#FFFFFF', '#000000'
                ];
                
                this.init();
            }
            
            init() {
                this.setupCanvas();
                this.setupEventListeners();
                this.setupTools();
                this.setupColorPresets();
                this.setupMobileControls();
                
                // Clear canvas with black background
                this.ctx.fillStyle = '#000000';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            }
            
            setupCanvas() {
                const resizeCanvas = () => {
                    const rect = this.container.getBoundingClientRect();
                    const dpr = window.devicePixelRatio || 1;
                    
                    this.canvas.width = rect.width * dpr;
                    this.canvas.height = rect.height * dpr;
                    this.canvas.style.width = rect.width + 'px';
                    this.canvas.style.height = rect.height + 'px';
                    
                    this.ctx.scale(dpr, dpr);
                    
                    // Redraw existing content if any
                    if (this.history.length > 0) {
                        this.redrawCanvas();
                    } else {
                        this.ctx.fillStyle = '#000000';
                        this.ctx.fillRect(0, 0, rect.width, rect.height);
                    }
                    
                    this.gridOverlay.style.width = rect.width + 'px';
                    this.gridOverlay.style.height = rect.height + 'px';
                    this.gridOverlay.style.backgroundSize = '20px 20px';
                };
                
                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();
                
                // Set initial styles
                this.ctx.strokeStyle = document.getElementById('colorPicker').value;
                this.ctx.lineWidth = this.brushSize;
                this.ctx.lineCap = 'round';
                this.ctx.lineJoin = 'round';
                this.ctx.fillStyle = '#000000';
            }
            
            setupEventListeners() {
                // Mouse events
                this.canvas.addEventListener('mousedown', (e) => this.handleStart(e));
                this.canvas.addEventListener('mousemove', (e) => this.handleMove(e));
                this.canvas.addEventListener('mouseup', () => this.handleEnd());
                this.canvas.addEventListener('mouseout', () => this.handleEnd());
                
                // Touch events
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.handleStart(e.touches[0]);
                }, { passive: false });
                
                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    this.handleMove(e.touches[0]);
                }, { passive: false });
                
                this.canvas.addEventListener('touchend', () => this.handleEnd());
                this.canvas.addEventListener('touchcancel', () => this.handleEnd());
            }
            
            setupTools() {
                // Tool selection
                document.querySelectorAll('.draw-tool[data-tool]').forEach(tool => {
                    tool.addEventListener('click', () => {
                        document.querySelectorAll('.draw-tool[data-tool]').forEach(t => {
                            t.classList.remove('active');
                        });
                        tool.classList.add('active');
                        this.currentTool = tool.dataset.tool;
                    });
                });
                
                // Brush size selection
                document.querySelectorAll('.size-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelectorAll('.size-option').forEach(opt => {
                            opt.classList.remove('active');
                        });
                        option.classList.add('active');
                        this.brushSize = parseInt(option.dataset.size);
                        this.ctx.lineWidth = this.brushSize;
                    });
                });
                
                // Color picker
                document.getElementById('colorPicker').addEventListener('input', (e) => {
                    this.ctx.strokeStyle = e.target.value;
                });
                
                // Clear canvas
                document.getElementById('clearCanvas').addEventListener('click', () => {
                    if (confirm('Are you sure you want to clear the canvas?')) {
                        this.ctx.fillStyle = '#000000';
                        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                        this.history = [];
                        this.currentStep = -1;
                    }
                });
                
                // Undo
                document.getElementById('undoDraw').addEventListener('click', () => {
                    this.undo();
                });
                
                // Toggle grid
                document.getElementById('toggleGrid').addEventListener('click', () => {
                    this.toggleGrid();
                });
                
                // Export
                document.getElementById('exportDrawBtn').addEventListener('click', () => {
                    this.exportDrawing();
                });
            }
            
            setupColorPresets() {
                const colorPresetsContainer = document.querySelector('.color-presets');
                this.colorPresets.forEach((color, index) => {
                    const preset = document.querySelectorAll('.color-preset')[index];
                    if (preset) {
                        preset.addEventListener('click', () => {
                            document.querySelectorAll('.color-preset').forEach(p => {
                                p.classList.remove('active');
                            });
                            preset.classList.add('active');
                            this.ctx.strokeStyle = color;
                            document.getElementById('colorPicker').value = color;
                        });
                    }
                });
                
                // Show color presets on mobile
                if (this.isMobile) {
                    colorPresetsContainer.style.display = 'flex';
                }
            }
            
            setupMobileControls() {
                // Mobile quick action buttons
                document.getElementById('mobileClearBtn').addEventListener('click', () => {
                    if (confirm('Clear canvas?')) {
                        this.ctx.fillStyle = '#000000';
                        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                        this.history = [];
                        this.currentStep = -1;
                    }
                });
                
                document.getElementById('mobileUndoBtn').addEventListener('click', () => {
                    this.undo();
                });
                
                document.getElementById('mobileGridBtn').addEventListener('click', () => {
                    this.toggleGrid();
                });
                
                document.getElementById('mobileExportBtn').addEventListener('click', () => {
                    this.exportDrawing();
                });
            }
            
            getCoordinates(e) {
                const rect = this.canvas.getBoundingClientRect();
                const dpr = window.devicePixelRatio || 1;
                
                return {
                    x: (e.clientX - rect.left) * (this.canvas.width / rect.width) / dpr,
                    y: (e.clientY - rect.top) * (this.canvas.height / rect.height) / dpr
                };
            }
            
            handleStart(e) {
                const pos = this.getCoordinates(e);
                this.isDrawing = true;
                [this.lastX, this.lastY] = [pos.x, pos.y];
                this.startX = pos.x;
                this.startY = pos.y;
                
                // Save to history
                if (['pencil', 'eraser', 'line', 'rectangle', 'circle', 'triangle'].includes(this.currentTool)) {
                    this.saveToHistory();
                }
                
                if (this.currentTool === 'eyedropper') {
                    this.pickColor(pos.x, pos.y);
                    this.isDrawing = false;
                } else if (['line', 'rectangle', 'circle', 'triangle'].includes(this.currentTool)) {
                    this.snapshot = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);
                }
            }
            
            handleMove(e) {
                if (!this.isDrawing) return;
                
                const pos = this.getCoordinates(e);
                const x = pos.x;
                const y = pos.y;
                
                if (this.currentTool === 'pencil') {
                    this.drawLine(this.lastX, this.lastY, x, y);
                    [this.lastX, this.lastY] = [x, y];
                } else if (this.currentTool === 'eraser') {
                    this.eraseLine(this.lastX, this.lastY, x, y);
                    [this.lastX, this.lastY] = [x, y];
                } else if (['line', 'rectangle', 'circle', 'triangle'].includes(this.currentTool)) {
                    this.drawShape(this.startX, this.startY, x, y);
                }
            }
            
            handleEnd() {
                if (this.isDrawing) {
                    this.isDrawing = false;
                    
                    // For shape tools, finalize the drawing
                    if (['line', 'rectangle', 'circle', 'triangle'].includes(this.currentTool)) {
                        this.saveToHistory();
                    }
                }
            }
            
            drawLine(x1, y1, x2, y2) {
                this.ctx.beginPath();
                this.ctx.moveTo(x1, y1);
                this.ctx.lineTo(x2, y2);
                this.ctx.stroke();
            }
            
            eraseLine(x1, y1, x2, y2) {
                this.ctx.save();
                this.ctx.globalCompositeOperation = 'destination-out';
                this.ctx.beginPath();
                this.ctx.moveTo(x1, y1);
                this.ctx.lineTo(x2, y2);
                this.ctx.stroke();
                this.ctx.restore();
            }
            
            drawShape(x1, y1, x2, y2) {
                // Restore snapshot
                this.ctx.putImageData(this.snapshot, 0, 0);
                
                this.ctx.beginPath();
                
                switch(this.currentTool) {
                    case 'line':
                        this.ctx.moveTo(x1, y1);
                        this.ctx.lineTo(x2, y2);
                        break;
                    case 'rectangle':
                        const width = x2 - x1;
                        const height = y2 - y1;
                        this.ctx.rect(x1, y1, width, height);
                        break;
                    case 'circle':
                        const radius = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                        this.ctx.arc(x1, y1, radius, 0, Math.PI * 2);
                        break;
                    case 'triangle':
                        this.ctx.moveTo(x1, y1);
                        this.ctx.lineTo(x2, y2);
                        this.ctx.lineTo(x1 * 2 - x2, y2);
                        this.ctx.closePath();
                        break;
                }
                
                this.ctx.stroke();
            }
            
            pickColor(x, y) {
                const pixel = this.ctx.getImageData(x, y, 1, 1).data;
                const color = this.rgbToHex(pixel[0], pixel[1], pixel[2]);
                this.ctx.strokeStyle = color;
                document.getElementById('colorPicker').value = color;
                
                // Update active color preset
                document.querySelectorAll('.color-preset').forEach(preset => {
                    if (preset.style.background === color || 
                        preset.getAttribute('data-color') === color) {
                        preset.classList.add('active');
                    } else {
                        preset.classList.remove('active');
                    }
                });
            }
            
            rgbToHex(r, g, b) {
                return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            }
            
            saveToHistory() {
                if (this.history.length > this.currentStep + 1) {
                    this.history = this.history.slice(0, this.currentStep + 1);
                }
                this.history.push(this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height));
                this.currentStep++;
            }
            
            undo() {
                if (this.currentStep > 0) {
                    this.currentStep--;
                    this.ctx.putImageData(this.history[this.currentStep], 0, 0);
                } else if (this.currentStep === 0) {
                    this.currentStep = -1;
                    this.ctx.fillStyle = '#000000';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                }
            }
            
            toggleGrid() {
                this.gridOverlay.style.display = this.gridOverlay.style.display === 'block' ? 'none' : 'block';
            }
            
            exportDrawing() {
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                
                tempCanvas.width = this.canvas.width;
                tempCanvas.height = this.canvas.height;
                
                // Fill background
                tempCtx.fillStyle = '#000000';
                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                
                // Draw the content
                tempCtx.drawImage(this.canvas, 0, 0);
                
                const dataURL = tempCanvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.download = 'webxos_drawing.png';
                link.href = dataURL;
                link.click();
            }
            
            redrawCanvas() {
                if (this.history.length > 0 && this.currentStep >= 0) {
                    this.ctx.putImageData(this.history[this.currentStep], 0, 0);
                } else {
                    this.ctx.fillStyle = '#000000';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                }
            }
        }

        // === WINDOW MANAGEMENT ===
        let kernelAgent;
        let activeWindow = null;
        let drawApp = null;

        function initializeOS() {
            setInterval(updateClock, 1000);
            updateClock();

            kernelAgent = new KernelAgent();
            createDesktopIcons();

            const windows = {
                kernel: document.getElementById('kernelWindow'),
                write: document.getElementById('writeWindow'),
                draw: document.getElementById('drawWindow'),
                guide: document.getElementById('guideWindow'),
                games: document.getElementById('gamesWindow'),
                tools: document.getElementById('toolsWindow'),
                research: document.getElementById('researchWindow'),
                links: document.getElementById('linksWindow')
            };

            function setupWindowControls(winId, maxBtnId, closeBtnId) {
                document.getElementById(maxBtnId).onclick = () => {
                    windows[winId].classList.toggle('maximized');
                    if (windows[winId].classList.contains('maximized')) {
                        windows[winId].style.left = '0';
                        windows[winId].style.top = '42px';
                    }
                    
                    // Resize canvas when draw window is maximized
                    if (winId === 'draw' && drawApp) {
                        setTimeout(() => {
                            drawApp.setupCanvas();
                        }, 100);
                    }
                };
                
                document.getElementById(closeBtnId).onclick = () => {
                    windows[winId].classList.remove('active');
                    windows[winId].classList.remove('maximized');
                    if (activeWindow === windows[winId]) {
                        activeWindow = null;
                    }
                };
            }

            setupWindowControls('kernel', 'maxKernel', 'closeKernel');
            setupWindowControls('write', 'maxWrite', 'closeWrite');
            setupWindowControls('draw', 'maxDraw', 'closeDraw');
            setupWindowControls('guide', 'maxGuide', 'closeGuide');
            setupWindowControls('games', 'maxGames', 'closeGames');
            setupWindowControls('tools', 'maxTools', 'closeTools');
            setupWindowControls('research', 'maxResearch', 'closeResearch');
            setupWindowControls('links', 'maxLinks', 'closeLinks');

            function openWindow(win) {
                Object.values(windows).forEach(w => {
                    w.classList.remove('active');
                    w.style.zIndex = '50';
                });
                
                win.classList.add('active');
                win.style.zIndex = '100';
                activeWindow = win;
                
                if (!win.classList.contains('maximized')) {
                    const winWidth = win.offsetWidth || 600;
                    const winHeight = win.offsetHeight || 500;
                    const screenWidth = window.innerWidth;
                    const screenHeight = window.innerHeight;
                    
                    // Make draw window larger by default
                    if (win.id === 'drawWindow') {
                        const drawWidth = Math.min(800, screenWidth * 0.9);
                        const drawHeight = Math.min(600, screenHeight * 0.8);
                        win.style.width = drawWidth + 'px';
                        win.style.height = drawHeight + 'px';
                        win.style.left = Math.max(0, (screenWidth - drawWidth) / 2) + 'px';
                        win.style.top = Math.max(42, (screenHeight - drawHeight - 74) / 2) + 'px';
                    } else {
                        const left = Math.max(0, (screenWidth - winWidth) / 2);
                        const top = Math.max(42, (screenHeight - winHeight - 74) / 2);
                        
                        win.style.left = left + 'px';
                        win.style.top = top + 'px';
                    }
                }
                
                // Initialize drawing when draw window is opened
                if (win.id === 'drawWindow' && !drawApp) {
                    setTimeout(() => {
                        drawApp = new DrawApp();
                    }, 100);
                }
            }

            document.addEventListener('click', (e) => {
                if (e.target.closest('.desktop-icon')) {
                    const icon = e.target.closest('.desktop-icon');
                    const iconId = icon.id;
                   
                    document.querySelectorAll('.desktop-icon').forEach(i => i.classList.remove('selected'));
                    icon.classList.add('selected');
                   
                    switch(iconId) {
                        case 'desktopWrite':
                            openWindow(windows.write);
                            break;
                        case 'desktopDraw':
                            openWindow(windows.draw);
                            break;
                        case 'desktopKernel':
                            openWindow(windows.kernel);
                            break;
                        case 'desktopGuide':
                            openWindow(windows.guide);
                            break;
                        case 'desktopGames':
                            openWindow(windows.games);
                            break;
                        case 'desktopTools':
                            openWindow(windows.tools);
                            break;
                        case 'desktopResearch':
                            openWindow(windows.research);
                            break;
                        case 'desktopLinks':
                            openWindow(windows.links);
                            break;
                    }
                }
            });

            document.getElementById('writeIcon').onclick = () => openWindow(windows.write);
            document.getElementById('drawIcon').onclick = () => openWindow(windows.draw);
            document.getElementById('kernelIcon').onclick = () => openWindow(windows.kernel);
            document.getElementById('guideIcon').onclick = () => openWindow(windows.guide);
            document.getElementById('gamesIcon').onclick = () => openWindow(windows.games);

            // Kernel Agent Event Listeners
            document.getElementById('startKernelTest').addEventListener('click', () => {
                kernelAgent.runTest();
            });
            
            document.getElementById('singleTest').addEventListener('click', () => {
                kernelAgent.runTest();
            });
            
            document.getElementById('continuousTest').addEventListener('click', () => {
                kernelAgent.startContinuous();
            });
            
            document.getElementById('stopTest').addEventListener('click', () => {
                kernelAgent.stopContinuous();
            });
            
            document.getElementById('exportKernelData').addEventListener('click', () => {
                kernelAgent.exportData();
            });
            
            document.getElementById('clearKernelLog').addEventListener('click', () => {
                kernelAgent.clearLog();
            });
            
            document.getElementById('matrixSlider').addEventListener('input', function() {
                const value = this.value;
                document.getElementById('matrixSizeValue').textContent = value;
                document.getElementById('matrixSize').value = value;
            });
            
            document.getElementById('memorySlider').addEventListener('input', function() {
                const value = this.value;
                document.getElementById('memoryLimitValue').textContent = value;
                kernelAgent.memoryLimit = parseInt(value);
                kernelAgent.updateMemoryBar();
            });
            
            document.getElementById('iterationsSlider').addEventListener('input', function() {
                document.getElementById('iterationsValue').textContent = this.value;
            });
            
            document.getElementById('agentMode').addEventListener('change', function() {
                kernelAgent.mode = this.value;
                kernelAgent.updateUI();
            });

            // === ENHANCED WRITE APPLICATION ===
            const markdownEditor = document.getElementById('markdownEditor');
            const markdownPreview = document.getElementById('markdownPreview');
            let currentTextColor = '#00FF00';
            
            marked.setOptions({
                breaks: true,
                gfm: true,
                headerIds: true,
                highlight: function(code, lang) {
                    return code;
                }
            });
            
            function updatePreview() {
                const markdownText = markdownEditor.value;
                try {
                    // Basic sanitization for security
                    const cleanText = markdownText.replace(/<script.*?>.*?<\/script>/gi, '');
                    markdownPreview.innerHTML = marked.parse(cleanText);
                    markdownPreview.style.color = currentTextColor;
                } catch (error) {
                    markdownPreview.innerHTML = `<p style="color: red;">Error rendering markdown: ${error.message}</p>`;
                }
            }
            
            function autoSave() {
                try {
                    localStorage.setItem('webxosWriteContent', markdownEditor.value);
                } catch (e) {
                    console.warn('AutoSave failed:', e);
                }
            }
            
            markdownEditor.addEventListener('input', () => {
                updatePreview();
                autoSave();
            });
            
            document.getElementById('clearWriteBtn').addEventListener('click', () => {
                if (confirm('Are you sure you want to clear the editor?')) {
                    markdownEditor.value = '';
                    updatePreview();
                    autoSave();
                }
            });
            
            document.getElementById('refreshPreviewBtn').addEventListener('click', updatePreview);
            document.getElementById('fontSelector').addEventListener('change', (e) => {
                applyFontTheme(e.target.value);
            });
            
            document.getElementById('fontSizeSelector').addEventListener('change', (e) => {
                applyFontSize(e.target.value);
            });
            
            document.getElementById('colorSelector').addEventListener('input', (e) => {
                applyTextColor(e.target.value);
            });
            
            document.getElementById('exportWriteBtn').addEventListener('click', exportWriteDocument);
            
            function applyFontTheme(font) {
                if (font && font !== 'default') {
                    markdownEditor.style.fontFamily = font === 'times' ? 'Times New Roman' : 
                                                    font === 'arial' ? 'Arial' : 
                                                    'Courier New';
                    markdownPreview.style.fontFamily = markdownEditor.style.fontFamily;
                }
                updatePreview();
            }
            
            function applyFontSize(size) {
                if (size) {
                    markdownEditor.style.fontSize = `${size}px`;
                    markdownPreview.style.fontSize = `${size}px`;
                    updatePreview();
                }
            }
            
            function applyTextColor(color) {
                if (color) {
                    currentTextColor = color;
                    markdownEditor.style.color = color;
                    markdownPreview.style.color = color;
                    updatePreview();
                }
            }
            
            function exportWriteDocument() {
                const content = markdownEditor.value;
                const blob = new Blob([content], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'webxos_document.md';
                a.click();
                URL.revokeObjectURL(url);
            }
            
            try {
                const savedContent = localStorage.getItem('webxosWriteContent');
                if (savedContent) {
                    markdownEditor.value = savedContent;
                    updatePreview();
                }
            } catch (e) {
                console.warn('Failed to load saved content:', e);
            }
            
            updatePreview();

            // === ENHANCED WINDOW DRAGGING with touch support ===
            document.querySelectorAll('.title-bar').forEach(bar => {
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                let isDragging = false;
               
                const startDrag = (e) => {
                    if (e.target.tagName === 'BUTTON') return;
                    e.preventDefault();
                    
                    const win = bar.parentElement;
                    if (win.classList.contains('maximized')) return;
                   
                    isDragging = true;
                    pos3 = e.clientX || e.touches[0].clientX;
                    pos4 = e.clientY || e.touches[0].clientY;
                    
                    document.addEventListener('mousemove', elementDrag);
                    document.addEventListener('touchmove', elementDrag);
                    document.addEventListener('mouseup', closeDragElement);
                    document.addEventListener('touchend', closeDragElement);
                };
               
                const elementDrag = (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    
                    const clientX = e.clientX || e.touches[0].clientX;
                    const clientY = e.clientY || e.touches[0].clientY;
                    
                    pos1 = pos3 - clientX;
                    pos2 = pos4 - clientY;
                    pos3 = clientX;
                    pos4 = clientY;
                    
                    const win = bar.parentElement;
                    const newTop = win.offsetTop - pos2;
                    const newLeft = win.offsetLeft - pos1;
                    
                    // Keep window within bounds
                    const maxTop = window.innerHeight - 100;
                    const maxLeft = window.innerWidth - 100;
                    
                    win.style.top = Math.max(42, Math.min(newTop, maxTop)) + "px";
                    win.style.left = Math.max(0, Math.min(newLeft, maxLeft)) + "px";
                };
               
                const closeDragElement = () => {
                    isDragging = false;
                    document.removeEventListener('mousemove', elementDrag);
                    document.removeEventListener('touchmove', elementDrag);
                    document.removeEventListener('mouseup', closeDragElement);
                    document.removeEventListener('touchend', closeDragElement);
                };
               
                bar.addEventListener('mousedown', startDrag);
                bar.addEventListener('touchstart', startDrag, { passive: false });
            });

            function createDesktopIcons() {
                const desktop = document.getElementById('desktop');
                const icons = [
                    { id: 'desktopWrite', icon: 'edit', name: 'Write', x: 20, y: 20, aria: 'Write Application' },
                    { id: 'desktopDraw', icon: 'paint-brush', name: 'Draw', x: 20, y: 100, aria: 'Draw Application' },
                    { id: 'desktopKernel', icon: 'microchip', name: 'Kernel Ops', x: 20, y: 180, aria: 'Kernel Operations Application' },
                    { id: 'desktopGuide', icon: 'book', name: 'Guide', x: 120, y: 20, aria: 'Guide and Help' },
                    { id: 'desktopGames', icon: 'gamepad', name: 'Games', x: 120, y: 100, folder: true, aria: 'Games Collection' },
                    { id: 'desktopTools', icon: 'tools', name: 'Tools', x: 120, y: 180, folder: true, aria: 'Tools Collection' },
                    { id: 'desktopResearch', icon: 'search', name: 'Research', x: 20, y: 260, folder: true, aria: 'Research Collection' },
                    { id: 'desktopLinks', icon: 'link', name: 'Links', x: 120, y: 260, folder: true, aria: 'Links Collection' }
                ];
               
                icons.forEach(iconConfig => {
                    const icon = document.createElement('div');
                    icon.id = iconConfig.id;
                    icon.className = `desktop-icon ${iconConfig.folder ? 'folder' : ''} ${iconConfig.icon === 'microchip' ? 'metrics' : ''}`;
                    icon.style.left = iconConfig.x + 'px';
                    icon.style.top = iconConfig.y + 'px';
                    icon.setAttribute('aria-label', iconConfig.aria || iconConfig.name);
                    icon.innerHTML = `
                        <i class="fas fa-${iconConfig.icon}"></i>
                        <div>${iconConfig.name}</div>
                    `;
                    desktop.appendChild(icon);
                });
            }
            
            setTimeout(() => {
                openWindow(windows.guide);
            }, 100);
        }
    </script>
</body>
</html>
