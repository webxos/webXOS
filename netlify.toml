[build]
    command = "npm run build"
    publish = "server"
    functions = "server"

[[redirects]]
    from = "/api/*"
    to = "/.netlify/functions/:splat"
    status = 200
    force = true

[[redirects]]
    from = "/static/sw.js"
    to = "/server/static/sw.js"
    status = 200
    force = true

[[headers]]
    for = "/static/sw.js"
    [headers.values]
        Content-Type = "text/javascript"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/static/neurots.js"
    [headers.values]
        Content-Type = "text/javascript"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/static/fuse.min.js"
    [headers.values]
        Content-Type = "text/javascript"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/mcp/mcp.js"
    [headers.values]
        Content-Type = "text/javascript"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/utils/search.js"
    [headers.values]
        Content-Type = "text/javascript"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/static/manifest.json"
    [headers.values]
        Content-Type = "application/json"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/utils/site_index.json"
    [headers.values]
        Content-Type = "application/json"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/static/neural_network.wasm"
    [headers.values]
        Content-Type = "application/wasm"
        Cache-Control = "public, max-age=31536000"

[[headers]]
    for = "/static/*"
    [headers.values]
        Cache-Control = "public, max-age=31536000"

[functions]
    directory = "server"
    included_files = [
        "server/agent1/index.js",
        "server/agent2/index.js",
        "server/agent3/index.js",
        "server/agent4/index.js",
        "server/utils/agent-base.js",
        "server/static/sw.js"
    ]
