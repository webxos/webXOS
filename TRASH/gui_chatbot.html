<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEBXOS Chatbot Training (BETA)</title>
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.1.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.5.0/lib/xterm-addon-fit.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/xterm@5.1.0/css/xterm.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --neon-green: #39FF14;
            --dark-green: #0a2e0a;
            --darker-green: #051905;
            --black: #000000;
            --dark-gray: #111111;
            --medium-gray: #1a1a1a;
            --light-gray: #333333;
        }
        
        body {
            background-color: var(--black);
            color: #e0e0e0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
        }
        
        .sidebar { 
            width: 250px; 
            background-color: var(--dark-gray); 
            color: #e0e0e0;
            border-right: 1px solid var(--light-gray);
        }
        
        .main-content { 
            flex-grow: 1; 
            background-color: var(--black);
        }
        
        .loading-screen { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: var(--black); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 9999; 
            flex-direction: column;
        }
        
        .loading-screen.hidden { display: none; }
        
        .chat-message { 
            margin: 10px; 
            padding: 10px; 
            border-radius: 8px; 
            max-width: 80%; 
            border: 1px solid var(--light-gray);
        }
        
        .user-message { 
            background: var(--dark-green); 
            color: var(--neon-green); 
            margin-left: auto; 
            border: 1px solid var(--neon-green);
        }
        
        .bot-message { 
            background: var(--dark-gray); 
            color: #e0e0e0;
            border: 1px solid var(--light-gray);
        }
        
        .logo { 
            font-weight: bold; 
            font-size: 1.5rem; 
            color: var(--neon-green); 
            text-shadow: 0 0 5px var(--neon-green);
        }
        
        .nav-item { 
            padding: 10px; 
            border-radius: 5px; 
            transition: all 0.3s; 
            margin-bottom: 5px;
        }
        
        .nav-item:hover { 
            background: var(--medium-gray); 
            cursor: pointer; 
            color: var(--neon-green);
        }
        
        .nav-item.active { 
            background: var(--dark-green); 
            color: var(--neon-green);
            box-shadow: 0 0 10px var(--neon-green);
        }
        
        .code-block { 
            background: var(--dark-gray); 
            padding: 10px; 
            border-radius: 5px; 
            margin: 10px 0; 
            font-family: monospace;
            border: 1px solid var(--light-gray);
            color: var(--neon-green);
        }
        
        .api-status { 
            display: inline-block; 
            width: 10px; 
            height: 10px; 
            border-radius: 50%; 
            margin-right: 5px; 
        }
        
        .api-status.connected { 
            background: var(--neon-green); 
            box-shadow: 0 0 5px var(--neon-green);
        }
        
        .api-status.disconnected { 
            background: #EF4444; 
        }
        
        .typing-indicator { display: inline-block; }
        .typing-dot { 
            display: inline-block; 
            width: 8px; 
            height: 8px; 
            border-radius: 50%; 
            background: var(--neon-green); 
            margin: 0 2px; 
            animation: typing 1.4s infinite ease-in-out; 
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .neon-glow {
            box-shadow: 0 0 5px var(--neon-green), 0 0 10px var(--neon-green), 0 0 15px var(--neon-green);
        }
        
        .neon-border {
            border: 1px solid var(--neon-green);
            box-shadow: 0 0 5px var(--neon-green);
        }
        
        .neon-text {
            color: var(--neon-green);
            text-shadow: 0 0 5px var(--neon-green);
        }
        
        .btn-primary {
            background-color: var(--dark-green);
            color: var(--neon-green);
            border: 1px solid var(--neon-green);
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background-color: var(--neon-green);
            color: var(--black);
            box-shadow: 0 0 10px var(--neon-green);
        }
        
        .btn-secondary {
            background-color: var(--dark-gray);
            color: #e0e0e0;
            border: 1px solid var(--light-gray);
            transition: all 0.3s;
        }
        
        .btn-secondary:hover {
            background-color: var(--medium-gray);
            border-color: var(--neon-green);
            color: var(--neon-green);
        }
        
        input, select, textarea {
            background-color: var(--dark-gray);
            color: #e0e0e0;
            border: 1px solid var(--light-gray);
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--neon-green);
            box-shadow: 0 0 5px var(--neon-green);
            outline: none;
        }
        
        .panel {
            background-color: var(--dark-gray);
            border: 1px solid var(--light-gray);
            border-radius: 8px;
        }
        
        .loading-bar {
            background: linear-gradient(90deg, var(--dark-green), var(--neon-green), var(--dark-green));
            background-size: 200% 100%;
            animation: loading 2s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .chat-container {
            background-color: var(--black);
            border: 1px solid var(--light-gray);
        }
        
        /* QNN Training Styles */
        .qnn-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 2px;
            width: 400px;
            height: 400px;
            background: var(--dark-gray);
            border: 1px solid var(--neon-green);
            margin: 20px auto;
        }
        
        .qnn-cell {
            background: var(--black);
            border: 1px solid var(--light-gray);
            transition: all 0.3s;
        }
        
        .qnn-cell.active {
            background: var(--neon-green);
            box-shadow: 0 0 8px var(--neon-green);
        }
        
        .slider-container {
            margin: 15px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: between;
            margin-bottom: 5px;
        }
        
        .training-data-item {
            padding: 8px;
            margin: 5px 0;
            background: var(--dark-gray);
            border-radius: 4px;
            border-left: 3px solid var(--neon-green);
        }
        
        .training-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .stat-box {
            background: var(--dark-gray);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid var(--light-gray);
        }
        
        .export-import-panel {
            border-top: 1px solid var(--light-gray);
            padding-top: 15px;
            margin-top: 15px;
        }
        
        .json-editor {
            width: 100%;
            height: 200px;
            font-family: monospace;
            background: var(--black);
            color: var(--neon-green);
            border: 1px solid var(--neon-green);
            padding: 10px;
            border-radius: 5px;
        }
        
        .training-progress {
            height: 10px;
            background: var(--dark-gray);
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--neon-green);
            transition: width 0.3s;
        }
        
        .import-btn {
            background-color: var(--dark-green);
            color: var(--neon-green);
            border: 1px solid var(--neon-green);
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
        }
        
        .import-btn:hover {
            background-color: var(--neon-green);
            color: var(--black);
            box-shadow: 0 0 10px var(--neon-green);
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loading-screen">
        <div class="logo mb-4">WEBXOS CHATBOT TRAINING</div>
        <div class="neon-text text-xl mb-2">Loading Chatbot Training Environment</div>
        <div class="text-gray-400">Initializing Quantum Neural Network...</div>
        <div class="w-64 h-2 bg-gray-800 rounded-full mt-4 overflow-hidden">
            <div class="h-full rounded-full loading-bar"></div>
        </div>
    </div>
    
    <div id="app">
        <div class="flex h-screen">
            <!-- Sidebar -->
            <div class="sidebar p-4 flex flex-col">
                <div class="logo mb-8">WEBXOS CHATBOT TRAINING</div>
                <ul class="flex-grow">
                    <li class="nav-item active" data-nav="chat" onclick="WebXOS.navigate('chat')">
                        <i class="fas fa-comments mr-2"></i>CHAT
                    </li>
                    <li class="nav-item" data-nav="train" onclick="WebXOS.navigate('train')">
                        <i class="fas fa-brain mr-2"></i>TRAIN
                    </li>
                    <li class="nav-item" data-nav="guide" onclick="WebXOS.navigate('guide')">
                        <i class="fas fa-book mr-2"></i>GUIDE
                    </li>
                </ul>
                <div class="mt-auto text-xs text-gray-400 text-center">
                    WebXOS.js v2.0<br>Chatbot Training Template
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="main-content p-4 flex flex-col overflow-hidden">
                <!-- CHAT View -->
                <div id="chat" class="flex flex-col h-full">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold neon-text">QNN Chat Agent</h2>
                        <div class="flex items-center">
                            <div class="mr-4">
                                <span class="neon-text">Training: </span>
                                <span id="training-progress-value">0%</span>
                            </div>
                            <div class="import-btn" onclick="QNNTrainer.importModel()">
                                <i class="fas fa-file-import mr-2"></i>Import Model
                            </div>
                            <div id="agent-status" class="ml-2 flex items-center">
                                <span class="api-status connected"></span>
                                <span class="text-sm neon-text">QNN Active</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="training-progress">
                        <div class="progress-bar" id="training-progress-bar" style="width: 0%"></div>
                    </div>
                    
                    <div id="chat-container" class="flex-grow overflow-y-auto p-4 chat-container rounded-lg mb-4">
                        <div class="chat-message bot-message">
                            <div class="font-bold neon-text">QNN Chatbot</div>
                            <div>Welcome to WEBXOS CHATBOT TRAINING IDE! I'm your QNN chatbot. Train me in the TRAIN QNN tab to improve my responses. You can also import a pre-trained model using the Import button.</div>
                        </div>
                    </div>
                    
                    <div class="flex">
                        <input id="chat-input" class="flex-grow p-3 rounded-l" placeholder="Chat with your QNN agent..." onkeypress="if(event.key === 'Enter') WebXOS.sendChat()">
                        <button class="p-3 btn-primary rounded-r flex items-center" onclick="WebXOS.sendChat()">
                            <i class="fas fa-paper-plane mr-2"></i>Send
                        </button>
                    </div>
                </div>
                
                <!-- QNN Training View -->
                <div id="train" class="flex flex-col h-full hidden overflow-y-auto">
                    <h2 class="text-2xl font-bold mb-4 neon-text">Chatbot QNN Training</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Training Interface -->
                        <div class="panel p-4">
                            <h3 class="text-xl font-semibold mb-3 neon-text">QNN Training Grid</h3>
                            <p class="text-gray-400 mb-4">Activate quantum nodes to create unique response patterns. Training happens automatically as you work.</p>
                            
                            <div class="qnn-grid" id="qnn-grid">
                                <!-- Grid cells will be generated by JavaScript -->
                            </div>
                            
                            <div class="training-stats">
                                <div class="stat-box">
                                    <div class="text-sm text-gray-400">Active Nodes</div>
                                    <div class="text-xl neon-text" id="active-nodes">0</div>
                                </div>
                                <div class="stat-box">
                                    <div class="text-sm text-gray-400">Training Data</div>
                                    <div class="text-xl neon-text" id="training-data-count">0</div>
                                </div>
                                <div class="stat-box">
                                    <div class="text-sm text-gray-400">Response Quality</div>
                                    <div class="text-xl neon-text" id="response-quality">0%</div>
                                </div>
                                <div class="stat-box">
                                    <div class="text-sm text-gray-400">Auto-Training</div>
                                    <div class="text-xl neon-text" id="auto-training">ON</div>
                                </div>
                            </div>
                            
                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>Learning Rate</span>
                                    <span id="learning-rate-value">0.5</span>
                                </div>
                                <input type="range" min="0" max="1" step="0.01" value="0.5" class="w-full" id="learning-rate">
                            </div>
                            
                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>Response Creativity</span>
                                    <span id="creativity-value">0.7</span>
                                </div>
                                <input type="range" min="0" max="1" step="0.01" value="0.7" class="w-full" id="creativity">
                            </div>
                            
                            <div class="flex space-x-2 mt-4">
                                <button class="btn-primary flex-1 py-2" onclick="QNNTrainer.exportModel()">
                                    <i class="fas fa-download mr-2"></i>Export Model
                                </button>
                                <button class="btn-secondary flex-1 py-2" onclick="QNNTrainer.resetGrid()">
                                    <i class="fas fa-redo mr-2"></i>Reset Grid
                                </button>
                            </div>
                            
                            <div class="export-import-panel">
                                <h4 class="text-lg font-semibold mb-2 neon-text">Model Data</h4>
                                <textarea id="json-data" class="json-editor" placeholder="Model JSON data will appear here after export..."></textarea>
                                <p class="text-sm text-gray-400 mt-2">Copy this JSON to save your model or import it in another session.</p>
                            </div>
                        </div>
                        
                        <!-- Training Guide & Data -->
                        <div class="space-y-6">
                            <div class="panel p-4">
                                <h3 class="text-xl font-semibold mb-3 neon-text">Training Data Manager</h3>
                                <p class="text-gray-400 mb-4">Add question-answer pairs to train your QNN agent. Training happens automatically.</p>
                                <div class="space-y-2 max-h-60 overflow-y-auto">
                                    <div class="flex justify-between text-sm">
                                        <span>Input Pattern</span>
                                        <span>Expected Response</span>
                                        <span>Actions</span>
                                    </div>
                                    <!-- Training data will be populated here -->
                                    <div id="training-data-list"></div>
                                </div>
                                <div class="mt-3 flex space-x-2">
                                    <input type="text" id="new-input" class="flex-1 p-2 rounded" placeholder="Input pattern (e.g., 'hello')">
                                    <input type="text" id="new-response" class="flex-1 p-2 rounded" placeholder="Expected response">
                                    <button class="btn-primary px-3" onclick="QNNTrainer.addTrainingData()">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="mt-2 flex space-x-2">
                                    <button class="btn-secondary flex-1 py-2" onclick="QNNTrainer.exportTrainingData()">
                                        <i class="fas fa-file-export mr-2"></i>Export Data
                                    </button>
                                    <button class="btn-secondary flex-1 py-2" onclick="QNNTrainer.importTrainingData()">
                                        <i class="fas fa-file-import mr-2"></i>Import Data
                                    </button>
                                </div>
                            </div>
                            
                            <div class="panel p-4">
                                <h3 class="text-xl font-semibold mb-3 neon-text">Quick Training Tips</h3>
                                <div class="space-y-3">
                                    <div class="training-data-item">
                                        <strong>Continuous Training</strong>
                                        <p class="text-sm text-gray-400">Your QNN trains automatically as you work. No need to manually trigger training.</p>
                                    </div>
                                    <div class="training-data-item">
                                        <strong>Grid Patterns</strong>
                                        <p class="text-sm text-gray-400">Activate nodes in clusters for better pattern recognition.</p>
                                    </div>
                                    <div class="training-data-item">
                                        <strong>Training Data</strong>
                                        <p class="text-sm text-gray-400">Add diverse examples. More data = better responses.</p>
                                    </div>
                                    <div class="training-data-item">
                                        <strong>Export/Import</strong>
                                        <p class="text-sm text-gray-400">Save your progress and continue training anytime.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="panel p-4">
                                <h3 class="text-xl font-semibold mb-3 neon-text">Training Performance</h3>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span>Model Complexity:</span>
                                        <span id="model-complexity">Low</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Training Accuracy:</span>
                                        <span id="training-accuracy">0%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Response Speed:</span>
                                        <span id="response-speed">Instant</span>
                                    </div>
                                </div>
                                <button class="btn-primary w-full mt-3 py-2" onclick="QNNTrainer.testModel()">
                                    <i class="fas fa-vial mr-2"></i>Test Model Performance
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- GUIDE View -->
                <div id="guide" class="panel p-6 rounded-lg hidden overflow-y-auto">
                    <h2 class="text-2xl font-bold mb-4 neon-text">WEBXOS CHATBOT TRAINING - Complete Guide</h2>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2 neon-text">What is WEBXOS CHATBOT TRAINING?</h3>
                        <p class="mb-4">WEBXOS CHATBOT TRAINING IDE is a lightweight, browser-based platform for training Quantum Neural Network (QNN) chatbots. Built on the WebXOS.js framework, it provides a seamless environment for creating, training, and deploying custom AI agents with zero setup required.</p>
                        
                        <div class="panel p-4 rounded-lg mb-4">
                            <h4 class="text-lg font-medium mb-2 neon-text">Key Features:</h4>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong>Visual QNN Training:</strong> Interactive grid-based neural network</li>
                                <li><strong>Continuous Auto-Training:</strong> Train 24/7 without manual intervention</li>
                                <li><strong>JSON Model Export:</strong> Save and share your trained models</li>
                                <li><strong>Seamless Import:</strong> Load pre-trained models instantly</li>
                                <li><strong>Real-Time Chat Testing:</strong> Test your agent as you train</li>
                                <li><strong>Modular Design:</strong> Template for other WebXOS.js applications</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2 neon-text">Getting Started - 3 Simple Steps</h3>
                        
                        <div class="panel p-4 rounded-lg mb-4">
                            <div class="space-y-4">
                                <div class="training-data-item">
                                    <strong class="neon-text">Step 1: CHAT with your Chatbot</strong>
                                    <p class="text-sm text-gray-400 mt-1">Start in the CHAT tab to interact with your QNN agent. Test its current capabilities and identify areas for improvement.</p>
                                </div>
                                <div class="training-data-item">
                                    <strong class="neon-text">Step 2: TRAIN a QNN</strong>
                                    <p class="text-sm text-gray-400 mt-1">Navigate to the TRAIN QNN tab to:
                                        <br>- Activate nodes in the quantum grid
                                        <br>- Add training data (question-answer pairs)
                                        <br>- Adjust learning parameters
                                        <br>- Export your model when ready
                                    </p>
                                </div>
                                <div class="training-data-item">
                                    <strong class="neon-text">Step 3: IMPORT/EXPORT chatbot models</strong>
                                    <p class="text-sm text-gray-400 mt-1">Use the Import button in CHAT tab to load pre-trained models. Use Export in TRAIN tab to save your progress.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2 neon-text">Chatbot QNN Training Explained</h3>
                        
                        <div class="panel p-4 rounded-lg mb-4">
                            <h4 class="text-lg font-medium mb-2 neon-text">The Quantum Grid</h4>
                            <p class="mb-3">The 10x10 grid represents your QNN's "quantum states." Each activated node contributes to the agent's response patterns:</p>
                            <ul class="list-disc pl-5 space-y-1 mb-3">
                                <li><strong>Low Activation (1-20 nodes):</strong> Simple, predictable responses</li>
                                <li><strong>Medium Activation (21-50 nodes):</strong> Balanced response variety</li>
                                <li><strong>High Activation (51-80 nodes):</strong> Complex, creative responses</li>
                                <li><strong>Full Activation (81-100 nodes):</strong> Highly nuanced but may be unpredictable</li>
                            </ul>
                            <p class="text-sm text-gray-400">Tip: Create cluster patterns rather than random scattering for better results.</p>
                        </div>
                        
                        <div class="panel p-4 rounded-lg mb-4">
                            <h4 class="text-lg font-medium mb-2 neon-text">Training Data Strategy</h4>
                            <p class="mb-3">Your training data directly influences response quality:</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong>Start with basics:</strong> Greetings, common questions</li>
                                <li><strong>Add domain-specific pairs:</strong> Tailor to your use case</li>
                                <li><strong>Include variations:</strong> Different ways to ask the same thing</li>
                                <li><strong>Quality over quantity:</strong> Clear, concise pairs work best</li>
                                <li><strong>Export your data:</strong> Build libraries of training pairs</li>
                            </ul>
                        </div>
                        
                        <div class="panel p-4 rounded-lg">
                            <h4 class="text-lg font-medium mb-2 neon-text">Parameter Tuning</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <strong class="neon-text">Learning Rate</strong>
                                    <p class="text-sm text-gray-400">Controls how quickly your QNN adapts to new data. Higher values learn faster but may be less stable.</p>
                                </div>
                                <div>
                                    <strong class="neon-text">Creativity</strong>
                                    <p class="text-sm text-gray-400">Adjusts response variation. Higher values produce more diverse but less predictable responses.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2 neon-text">Export/Import Workflow</h3>
                        
                        <div class="panel p-4 rounded-lg">
                            <div class="space-y-4">
                                <div class="training-data-item">
                                    <strong>Exporting Your Model</strong>
                                    <p class="text-sm text-gray-400">Click "Export Model" in the TRAIN tab. This generates a JSON file containing:
                                        <br>- Your grid configuration
                                        <br>- All training data
                                        <br>- Current parameters
                                        <br>- Performance metrics
                                    </p>
                                </div>
                                <div class="training-data-item">
                                    <strong>Importing Models</strong>
                                    <p class="text-sm text-gray-400">Use the "Import Model" button in the CHAT tab to load previously saved models. This instantly applies the trained QNN to your chat agent.</p>
                                </div>
                                <div class="training-data-item">
                                    <strong>Sharing Models</strong>
                                    <p class="text-sm text-gray-400">Export your model and share the JSON file with others. They can import it into their own WEBXOS QUANTUM IDE instance.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2 neon-text">About the Framework</h3>
                        
                        <div class="panel p-4 rounded-lg">
                            <p class="mb-3">This application is built on WebXOS.js, a lightweight framework designed for modular AI applications:</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong>Single HTML File:</strong> No server requirements, runs entirely in browser</li>
                                <li><strong>Local Storage:</strong> Your work is automatically saved</li>
                                <li><strong>Reactive State Management:</strong> Real-time updates across tabs</li>
                                <li><strong>Modular Architecture:</strong> Easy to extend and customize</li>
                                <li><strong>Privacy-First:</strong> All data stays on your device</li>
                            </ul>
                            <p class="mt-3 text-sm text-gray-400">This QNN training template can be adapted for other AI applications within the WebXOS.js ecosystem.</p>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold mb-2 neon-text">Troubleshooting & Tips</h3>
                        
                        <div class="panel p-4 rounded-lg">
                            <div class="space-y-3">
                                <div class="training-data-item">
                                    <strong>Agent responses seem random?</strong>
                                    <p class="text-sm text-gray-400">Reduce creativity slider and add more specific training data.</p>
                                </div>
                                <div class="training-data-item">
                                    <strong>Not learning new patterns?</strong>
                                    <p class="text-sm text-gray-400">Increase learning rate and activate more grid nodes.</p>
                                </div>
                                <div class="training-data-item">
                                    <strong>Import not working?</strong>
                                    <p class="text-sm text-gray-400">Ensure you're using a valid JSON export from the TRAIN tab.</p>
                                </div>
                                <div class="training-data-item">
                                    <strong>Want to start over?</strong>
                                    <p class="text-sm text-gray-400">Use "Reset Grid" and clear your training data, or refresh the page.</p>
                                </div>
                                <div class="training-data-item">
                                    <strong>Best performance tips?</strong>
                                    <p class="text-sm text-gray-400">Cluster grid activations, use diverse training data, and find the right balance between learning rate and creativity.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simplified WebXOS QUANTUM IDE Framework
        const WebXOS = {
            state: new Proxy({ 
                appState: 'chat',
                modelTrained: false,
                trainingProgress: 0
            }, {
                set(target, key, value) {
                    target[key] = value;
                    
                    // Update training progress display
                    if (key === 'trainingProgress') {
                        document.getElementById('training-progress-value').textContent = value + '%';
                        document.getElementById('training-progress-bar').style.width = value + '%';
                    }
                    
                    // Update model status
                    if (key === 'modelTrained') {
                        const agentStatus = document.getElementById('agent-status');
                        if (value) {
                            agentStatus.innerHTML = '<span class="api-status connected"></span><span class="text-sm neon-text">QNN Active</span>';
                        } else {
                            agentStatus.innerHTML = '<span class="api-status disconnected"></span><span class="text-sm">Training Needed</span>';
                        }
                    }
                    
                    // Save to localStorage
                    if (key !== 'appState') {
                        localStorage.setItem(key, WebXOS.encrypt(JSON.stringify(value)));
                    }
                    return true;
                },
                get(target, key) {
                    // Return from proxy or decrypt from localStorage
                    if (target[key] !== undefined) {
                        return target[key];
                    } else {
                        const stored = localStorage.getItem(key);
                        if (stored) {
                            return JSON.parse(WebXOS.decrypt(stored));
                        }
                        return undefined;
                    }
                }
            }),
            
            // Encryption functions
            encrypt(data) {
                return btoa(unescape(encodeURIComponent(data)));
            },
            
            decrypt(data) {
                try {
                    return decodeURIComponent(escape(atob(data)));
                } catch (e) {
                    return '{}';
                }
            },
            
            // Navigation function
            navigate(view) {
                this.state.appState = view;
                
                // Hide all views
                ['chat', 'train', 'guide'].forEach(v => {
                    const element = document.getElementById(v);
                    if (element) element.classList.add('hidden');
                });
                
                // Show selected view
                document.getElementById(view).classList.remove('hidden');
                
                // Update navigation active state
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                const navElement = document.querySelector(`[data-nav="${view}"]`);
                if (navElement) navElement.classList.add('active');
            },
            
            // Chat functionality
            sendChat() {
                const input = document.getElementById('chat-input');
                const message = input.value.trim();
                if (!message) return;
                
                const chatContainer = document.getElementById('chat-container');
                
                // Add user message
                chatContainer.innerHTML += `<div class="chat-message user-message">
                    <div class="font-bold">You</div>
                    <div>${message}</div>
                </div>`;
                
                // Add typing indicator
                chatContainer.innerHTML += `<div class="chat-message bot-message">
                    <div class="font-bold neon-text">QNN Agent</div>
                    <div class="typing-indicator">
                        <span class="typing-dot"></span>
                        <span class="typing-dot"></span>
                        <span class="typing-dot"></span>
                    </div>
                </div>`;
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
                input.value = '';
                
                // Generate response based on training
                setTimeout(() => {
                    // Remove typing indicator
                    const messages = chatContainer.querySelectorAll('.chat-message');
                    messages[messages.length - 1].remove();
                    
                    let response;
                    if (this.state.modelTrained) {
                        response = QNNTrainer.generateResponse(message);
                    } else {
                        response = "Please train your QNN model first in the TRAIN tab! Add some training data and activate grid nodes.";
                    }
                    
                    chatContainer.innerHTML += `<div class="chat-message bot-message">
                        <div class="font-bold neon-text">QNN Agent</div>
                        <div>${response}</div>
                    </div>`;
                    
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1000 + Math.random() * 1000);
            },
            
            // Initialize the application
            init() {
                // Simulate loading process
                const loadingBar = document.querySelector('.loading-bar');
                let width = 0;
                const interval = setInterval(() => {
                    width += 5;
                    loadingBar.style.width = `${width}%`;
                    if (width >= 100) {
                        clearInterval(interval);
                        setTimeout(() => {
                            document.getElementById('loading-screen').classList.add('hidden');
                        }, 500);
                    }
                }, 100);
                
                // Initialize QNN Trainer
                QNNTrainer.init();
                
                // Set initial state
                this.state.trainingProgress = QNNTrainer.trainingProgress;
                this.navigate('chat');
            }
        };

        // Enhanced QNN Training Module with Auto-Training
        const QNNTrainer = {
            grid: [],
            gridSize: 10,
            trainingData: [],
            learningRate: 0.5,
            creativity: 0.7,
            activeNodes: 0,
            trainingProgress: 0,
            trainingAccuracy: 0,
            autoTraining: true,
            
            init() {
                this.createGrid();
                this.loadTrainingData();
                this.setupEventListeners();
                this.updateDisplay();
                
                // Load saved model if exists
                this.loadModelFromStorage();
                
                // Set up auto-training interval
                setInterval(() => {
                    if (this.autoTraining && (this.trainingData.length > 0 || this.activeNodes > 0)) {
                        this.autoTrain();
                    }
                }, 5000); // Auto-train every 5 seconds
            },
            
            createGrid() {
                const gridElement = document.getElementById('qnn-grid');
                gridElement.innerHTML = '';
                this.grid = [];
                
                for (let y = 0; y < this.gridSize; y++) {
                    this.grid[y] = [];
                    for (let x = 0; x < this.gridSize; x++) {
                        const cell = document.createElement('div');
                        cell.className = 'qnn-cell';
                        cell.dataset.x = x;
                        cell.dataset.y = y;
                        cell.addEventListener('click', () => this.toggleCell(x, y));
                        gridElement.appendChild(cell);
                        this.grid[y][x] = false;
                    }
                }
            },
            
            toggleCell(x, y) {
                this.grid[y][x] = !this.grid[y][x];
                const cell = document.querySelector(`.qnn-cell[data-x="${x}"][data-y="${y}"]`);
                cell.classList.toggle('active', this.grid[y][x]);
                this.updateActiveNodes();
                this.updateTrainingProgress();
                this.updateDisplay();
                
                // Auto-train when grid changes
                if (this.autoTraining) {
                    this.autoTrain();
                }
            },
            
            updateActiveNodes() {
                this.activeNodes = this.grid.flat().filter(cell => cell).length;
            },
            
            setupEventListeners() {
                document.getElementById('learning-rate').addEventListener('input', (e) => {
                    this.learningRate = parseFloat(e.target.value);
                    document.getElementById('learning-rate-value').textContent = this.learningRate.toFixed(2);
                    
                    // Auto-train when parameters change
                    if (this.autoTraining) {
                        this.autoTrain();
                    }
                });
                
                document.getElementById('creativity').addEventListener('input', (e) => {
                    this.creativity = parseFloat(e.target.value);
                    document.getElementById('creativity-value').textContent = this.creativity.toFixed(2);
                    
                    // Auto-train when parameters change
                    if (this.autoTraining) {
                        this.autoTrain();
                    }
                });
            },
            
            loadTrainingData() {
                // Default training data
                this.trainingData = [
                    { input: "hello", response: "Hello! How can I assist you today?" },
                    { input: "hi", response: "Hi there! What can I help you with?" },
                    { input: "help", response: "I'm here to help! What do you need assistance with?" },
                    { input: "thanks", response: "You're welcome! Let me know if you need anything else." },
                    { input: "what can you do", response: "I'm a QNN agent trained to assist with various tasks. How can I help you?" }
                ];
                this.updateTrainingDataDisplay();
            },
            
            addTrainingData() {
                const input = document.getElementById('new-input').value.trim();
                const response = document.getElementById('new-response').value.trim();
                
                if (input && response) {
                    this.trainingData.push({ input, response });
                    this.updateTrainingDataDisplay();
                    document.getElementById('new-input').value = '';
                    document.getElementById('new-response').value = '';
                    
                    // Update progress and auto-train
                    this.updateTrainingProgress();
                    if (this.autoTraining) {
                        this.autoTrain();
                    }
                }
            },
            
            updateTrainingDataDisplay() {
                const container = document.getElementById('training-data-list');
                container.innerHTML = '';
                
                this.trainingData.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = 'training-data-item';
                    div.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div class="flex-1">
                                <div class="text-sm"><strong>Input:</strong> ${item.input}</div>
                                <div class="text-sm"><strong>Response:</strong> ${item.response}</div>
                            </div>
                            <button class="text-red-400 ml-2" onclick="QNNTrainer.removeTrainingData(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(div);
                });
                
                document.getElementById('training-data-count').textContent = this.trainingData.length;
            },
            
            removeTrainingData(index) {
                this.trainingData.splice(index, 1);
                this.updateTrainingDataDisplay();
                this.updateTrainingProgress();
            },
            
            autoTrain() {
                // Calculate training progress based on data and grid complexity
                const dataProgress = Math.min(this.trainingData.length * 5, 50);
                const gridProgress = Math.min(this.activeNodes, 50);
                this.trainingProgress = Math.min(dataProgress + gridProgress, 100);
                
                // Calculate accuracy based on training data and grid complexity
                this.trainingAccuracy = Math.min(30 + (this.trainingData.length * 5) + (this.activeNodes * 0.5), 95);
                
                // Update WebXOS state
                WebXOS.state.modelTrained = this.trainingProgress > 10;
                WebXOS.state.trainingProgress = this.trainingProgress;
                
                this.updateDisplay();
                
                // Save model to storage
                this.saveModelToStorage();
            },
            
            generateResponse(input) {
                if (!WebXOS.state.modelTrained) {
                    return "Please train the QNN first by adding training data and activating grid nodes!";
                }
                
                const lowerInput = input.toLowerCase();
                
                // Check for exact matches in training data
                for (const item of this.trainingData) {
                    if (lowerInput.includes(item.input.toLowerCase())) {
                        return this.applyCreativity(item.response);
                    }
                }
                
                // Check for partial matches
                for (const item of this.trainingData) {
                    const words = lowerInput.split(' ');
                    for (const word of words) {
                        if (item.input.toLowerCase().includes(word) && word.length > 3) {
                            return this.applyCreativity(item.response);
                        }
                    }
                }
                
                // Generate creative response based on grid pattern
                return this.generateCreativeResponse(input);
            },
            
            applyCreativity(response) {
                if (this.creativity < 0.3) return response;
                
                const modifiers = [
                    "I think", "In my opinion", "Based on my training",
                    "From what I've learned", "Considering the patterns"
                ];
                
                const enhancements = [
                    " Does that help?",
                    " Let me know if you need more details.",
                    " I hope that answers your question.",
                    " Is there anything else I can assist with?"
                ];
                
                let newResponse = response;
                
                if (this.creativity > 0.5 && Math.random() > 0.7) {
                    newResponse = modifiers[Math.floor(Math.random() * modifiers.length)] + ", " + newResponse.toLowerCase();
                }
                
                if (this.creativity > 0.7 && Math.random() > 0.5) {
                    newResponse += enhancements[Math.floor(Math.random() * enhancements.length)];
                }
                
                return newResponse;
            },
            
            generateCreativeResponse(input) {
                const baseResponses = [
                    "That's an interesting query. My QNN training suggests this might be helpful.",
                    "I'm processing your input through my quantum neural network.",
                    "Based on my activated nodes and training data, I'd like to share this perspective.",
                    "My neural patterns indicate this response might address your query."
                ];
                
                let response = baseResponses[Math.floor(Math.random() * baseResponses.length)];
                
                // Modify response based on active nodes
                if (this.activeNodes > 50) {
                    response += " My extensive network activation provides additional insights.";
                } else if (this.activeNodes < 10) {
                    response += " My current configuration suggests gathering more training data for this topic.";
                }
                
                return response;
            },
            
            testModel() {
                const testInputs = [
                    "hello",
                    "help",
                    "what can you do",
                    "tell me about yourself"
                ];
                
                let correct = 0;
                testInputs.forEach(input => {
                    const response = this.generateResponse(input);
                    if (response && response.length > 10 && !response.includes("Please train")) {
                        correct++;
                    }
                });
                
                const accuracy = Math.round((correct / testInputs.length) * 100);
                this.trainingAccuracy = accuracy;
                
                alert(`Model Test Complete!\nAccuracy: ${accuracy}%\nThe model correctly handled ${correct} out of ${testInputs.length} test inputs.`);
                
                this.updateDisplay();
            },
            
            exportModel() {
                const modelData = {
                    grid: this.grid,
                    trainingData: this.trainingData,
                    parameters: {
                        learningRate: this.learningRate,
                        creativity: this.creativity
                    },
                    stats: {
                        activeNodes: this.activeNodes,
                        trainingProgress: this.trainingProgress,
                        trainingAccuracy: this.trainingAccuracy
                    },
                    timestamp: new Date().toISOString(),
                    version: "WEBXOS-QNN-1.0"
                };
                
                const jsonData = JSON.stringify(modelData, null, 2);
                document.getElementById('json-data').value = jsonData;
                
                // Create download link
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(jsonData);
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "webxos_qnn_model.json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
                
                alert('QNN Model exported successfully!');
            },
            
            importModel() {
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = '.json';
                
                fileInput.onchange = (e) => {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = (event) => {
                        try {
                            const modelData = JSON.parse(event.target.result);
                            
                            // Validate model data structure
                            if (!modelData.grid || !modelData.trainingData) {
                                throw new Error("Invalid QNN model format");
                            }
                            
                            // Apply imported model
                            this.grid = modelData.grid;
                            this.trainingData = modelData.trainingData;
                            this.learningRate = modelData.parameters.learningRate;
                            this.creativity = modelData.parameters.creativity;
                            this.activeNodes = modelData.stats.activeNodes;
                            this.trainingProgress = modelData.stats.trainingProgress;
                            this.trainingAccuracy = modelData.stats.trainingAccuracy;
                            
                            // Update UI
                            this.updateGridDisplay();
                            this.updateTrainingDataDisplay();
                            this.updateSliders();
                            this.updateDisplay();
                            
                            // Update WebXOS state
                            WebXOS.state.modelTrained = true;
                            WebXOS.state.trainingProgress = this.trainingProgress;
                            
                            // Show success message in chat
                            const chatContainer = document.getElementById('chat-container');
                            chatContainer.innerHTML += `<div class="chat-message bot-message">
                                <div class="font-bold neon-text">SYSTEM</div>
                                <div>QNN Model imported successfully! Training: ${this.trainingProgress}%, Accuracy: ${this.trainingAccuracy}%</div>
                            </div>`;
                            chatContainer.scrollTop = chatContainer.scrollHeight;
                            
                        } catch (error) {
                            alert('Error importing QNN model: ' + error.message);
                        }
                    };
                    
                    reader.readAsText(file);
                };
                
                fileInput.click();
            },
            
            exportTrainingData() {
                const trainingData = {
                    trainingData: this.trainingData,
                    timestamp: new Date().toISOString(),
                    version: "WEBXOS-Training-1.0"
                };
                
                const jsonData = JSON.stringify(trainingData, null, 2);
                
                // Create download link
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(jsonData);
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "webxos_training_data.json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
                
                alert('Training data exported successfully!');
            },
            
            importTrainingData() {
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = '.json';
                
                fileInput.onchange = (e) => {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = (event) => {
                        try {
                            const trainingData = JSON.parse(event.target.result);
                            
                            if (!trainingData.trainingData || !Array.isArray(trainingData.trainingData)) {
                                throw new Error("Invalid training data format");
                            }
                            
                            this.trainingData = trainingData.trainingData;
                            this.updateTrainingDataDisplay();
                            this.updateTrainingProgress();
                            
                            // Auto-train with new data
                            if (this.autoTraining) {
                                this.autoTrain();
                            }
                            
                            alert('Training data imported successfully!');
                        } catch (error) {
                            alert('Error importing training data: ' + error.message);
                        }
                    };
                    
                    reader.readAsText(file);
                };
                
                fileInput.click();
            },
            
            updateGridDisplay() {
                for (let y = 0; y < this.gridSize; y++) {
                    for (let x = 0; x < this.gridSize; x++) {
                        const cell = document.querySelector(`.qnn-cell[data-x="${x}"][data-y="${y}"]`);
                        if (cell) {
                            cell.classList.toggle('active', this.grid[y][x]);
                        }
                    }
                }
                this.updateActiveNodes();
            },
            
            updateSliders() {
                document.getElementById('learning-rate').value = this.learningRate;
                document.getElementById('creativity').value = this.creativity;
                document.getElementById('learning-rate-value').textContent = this.learningRate.toFixed(2);
                document.getElementById('creativity-value').textContent = this.creativity.toFixed(2);
            },
            
            updateTrainingProgress() {
                const dataProgress = Math.min(this.trainingData.length * 5, 50);
                const gridProgress = Math.min(this.activeNodes, 50);
                this.trainingProgress = Math.min(dataProgress + gridProgress, 100);
                WebXOS.state.trainingProgress = this.trainingProgress;
            },
            
            resetGrid() {
                this.createGrid();
                this.updateDisplay();
            },
            
            updateDisplay() {
                document.getElementById('active-nodes').textContent = this.activeNodes;
                document.getElementById('training-data-count').textContent = this.trainingData.length;
                document.getElementById('response-quality').textContent = this.trainingAccuracy + '%';
                document.getElementById('training-accuracy').textContent = this.trainingAccuracy + '%';
                document.getElementById('auto-training').textContent = this.autoTraining ? 'ON' : 'OFF';
                
                // Update model complexity
                let complexity = 'Low';
                if (this.activeNodes > 30) complexity = 'Medium';
                if (this.activeNodes > 60) complexity = 'High';
                if (this.activeNodes > 80) complexity = 'Very High';
                document.getElementById('model-complexity').textContent = complexity;
                
                // Update response speed
                document.getElementById('response-speed').textContent = 'Instant';
            },
            
            saveModelToStorage() {
                const modelData = {
                    grid: this.grid,
                    trainingData: this.trainingData,
                    parameters: {
                        learningRate: this.learningRate,
                        creativity: this.creativity
                    },
                    stats: {
                        activeNodes: this.activeNodes,
                        trainingProgress: this.trainingProgress,
                        trainingAccuracy: this.trainingAccuracy
                    }
                };
                
                localStorage.setItem('webxosQnnModel', JSON.stringify(modelData));
            },
            
            loadModelFromStorage() {
                const savedModel = localStorage.getItem('webxosQnnModel');
                if (savedModel) {
                    try {
                        const modelData = JSON.parse(savedModel);
                        this.grid = modelData.grid || [];
                        this.trainingData = modelData.trainingData || [];
                        this.learningRate = modelData.parameters?.learningRate || 0.5;
                        this.creativity = modelData.parameters?.creativity || 0.7;
                        this.activeNodes = modelData.stats?.activeNodes || 0;
                        this.trainingProgress = modelData.stats?.trainingProgress || 0;
                        this.trainingAccuracy = modelData.stats?.trainingAccuracy || 0;
                        
                        // Update UI
                        this.updateGridDisplay();
                        this.updateTrainingDataDisplay();
                        this.updateSliders();
                        this.updateDisplay();
                        
                        // Update WebXOS state
                        WebXOS.state.modelTrained = this.trainingProgress > 10;
                        WebXOS.state.trainingProgress = this.trainingProgress;
                        
                    } catch (error) {
                        console.error('Error loading saved model:', error);
                    }
                }
            }
        };

        // Initialize the application when the page loads
        window.addEventListener('DOMContentLoaded', () => {
            WebXOS.init();
        });
    </script>
</body>
</html>
