<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IBM/CLI System Terminal - by webXOS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            padding: 20px;
        }
        
        .terminal-container {
            width: 100%;
            height: 100%;
            border: 2px solid #0f0;
            padding: 10px;
            overflow: auto;
            background-color: #000;
        }
        
        #terminal-output {
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.3;
        }
        
        .input-line {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .prompt {
            color: #0f0;
            margin-right: 10px;
        }
        
        #terminal-input {
            background: transparent;
            border: none;
            color: #0f0;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            outline: none;
            flex-grow: 1;
        }
        
        .command-output {
            color: #0f0;
            margin: 5px 0;
        }
        
        .error-output {
            color: #f00;
        }
        
        .welcome {
            color: #0f0;
            margin-bottom: 10px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 10px;
            color: #0f0;
            border-bottom: 1px solid #0f0;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="terminal-container">
        <div class="header">IBM/CLI System Terminal - by webXOS</div>
        <div id="terminal-output">
            <div class="welcome">IBM System/370 - Terminal Emulator v1.0</div>
            <div class="welcome">Ready.</div>
        </div>
        <div class="input-line">
            <span class="prompt">&gt;</span>
            <input type="text" id="terminal-input" autofocus>
        </div>
    </div>

    <script>
        // Initialize terminal state
        let commandHistory = [];
        let historyIndex = -1;
        let terminalOutput = document.getElementById('terminal-output');
        let terminalInput = document.getElementById('terminal-input');
        
        // Available commands
        const commands = {
            'help': 'show all available commands',
            'date': 'show current date and time',
            'clear': 'clear the terminal screen',
            'echo': 'echo back the input text',
            'calc': 'simple calculator (e.g., calc 2+3)',
            'history': 'show command history',
            'system': 'show system information'
        };
        
        // Initialize terminal
        function initTerminal() {
            terminalInput.focus();
            
            // Handle command input
            terminalInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    processCommand(this.value);
                    this.value = '';
                    historyIndex = -1;
                } else if (e.key === 'ArrowUp') {
                    // Navigate command history up
                    if (commandHistory.length > 0) {
                        if (historyIndex < commandHistory.length - 1) {
                            historyIndex++;
                        }
                        this.value = commandHistory[commandHistory.length - 1 - historyIndex];
                    }
                    e.preventDefault();
                } else if (e.key === 'ArrowDown') {
                    // Navigate command history down
                    if (commandHistory.length > 0 && historyIndex > 0) {
                        historyIndex--;
                        this.value = commandHistory[commandHistory.length - 1 - historyIndex];
                    } else {
                        this.value = '';
                        historyIndex = -1;
                    }
                    e.preventDefault();
                }
            });
            
            // Keep focus on input
            document.addEventListener('click', function() {
                terminalInput.focus();
            });
        }
        
        // Process user command
        function processCommand(cmd) {
            if (cmd.trim() === '') return;
            
            // Add to history
            commandHistory.push(cmd);
            
            // Display the command
            addOutput('&gt; ' + cmd, 'command');
            
            // Parse and execute command
            const parts = cmd.split(' ');
            const mainCmd = parts[0].toLowerCase();
            
            switch(mainCmd) {
                case 'help':
                    showHelp();
                    break;
                    
                case 'date':
                    showDate();
                    break;
                    
                case 'clear':
                    clearTerminal();
                    break;
                    
                case 'echo':
                    showEcho(parts.slice(1).join(' '));
                    break;
                    
                case 'calc':
                    calculate(parts.slice(1).join(' '));
                    break;
                    
                case 'history':
                    showHistory();
                    break;
                    
                case 'system':
                    showSystemInfo();
                    break;
                    
                default:
                    addOutput(`Command not found: ${mainCmd}`, 'error');
                    addOutput(`Type 'help' for available commands`, 'output');
            }
            
            // Scroll to bottom
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }
        
        // Add output to terminal
        function addOutput(text, type = 'output') {
            const output = document.createElement('div');
            output.className = type + '-output';
            output.textContent = text;
            terminalOutput.appendChild(output);
        }
        
        // Command implementations
        function showHelp() {
            addOutput('Available commands:', 'output');
            for (const [cmd, desc] of Object.entries(commands)) {
                addOutput(`  ${cmd.padEnd(10)} - ${desc}`, 'output');
            }
        }
        
        function showDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            addOutput(now.toLocaleDateString('en-US', options), 'output');
        }
        
        function clearTerminal() {
            terminalOutput.innerHTML = '';
            addOutput('Terminal cleared.', 'output');
        }
        
        function showEcho(text) {
            if (text) {
                addOutput(text, 'output');
            } else {
                addOutput('Usage: echo [text]', 'error');
            }
        }
        
        function calculate(expression) {
            if (!expression) {
                addOutput('Usage: calc [expression]', 'error');
                addOutput('Example: calc 2+3*5', 'output');
                return;
            }
            
            try {
                // Sanitize the expression for eval
                const sanitized = expression
                    .replace(/[^0-9+\-*/().%]/g, '')
                    .replace(/(\d+)%/g, '($1/100)');
                
                // Evaluate the expression
                const result = eval(sanitized);
                addOutput(`${expression} = ${result}`, 'output');
            } catch (error) {
                addOutput(`Calculation error: ${error.message}`, 'error');
            }
        }
        
        function showHistory() {
            if (commandHistory.length === 0) {
                addOutput('No command history.', 'output');
                return;
            }
            
            addOutput('Command history:', 'output');
            commandHistory.forEach((cmd, index) => {
                addOutput(`  ${index + 1}: ${cmd}`, 'output');
            });
        }
        
        function showSystemInfo() {
            addOutput('System Information:', 'output');
            addOutput(`  User Agent: ${navigator.userAgent}`, 'output');
            addOutput(`  Platform: ${navigator.platform}`, 'output');
            addOutput(`  Language: ${navigator.language}`, 'output');
            addOutput(`  Online: ${navigator.onLine ? 'Yes' : 'No'}`, 'output');
            addOutput(`  Terminal: IBM 3270 Emulator v1.0`, 'output');
        }
        
        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', initTerminal);
        
        // Add some initial help text
        setTimeout(() => {
            addOutput('Type a command and press Enter. Use Up/Down arrows for history.', 'output');
        }, 100);
    </script>
</body>
</html>
