<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>webXOS ANYTHING | DA3 Scene Generator</title>
  <style>
    /* Keep your existing CSS here (from your earlier version).
       For brevity, I‚Äôm not repeating the entire style block again,
       but you should paste the full CSS you already had. */
  </style>
</head>
<body>
  <div class="container">
    <!-- Left Panel -->
    <div class="left-panel">
      <div class="header">
        <div class="logo"><h1>webXOS <span>ANYTHING</span></h1></div>
        <div class="status-indicators">
          <div class="status"><div class="status-dot"></div><span>AGENT ACTIVE</span></div>
          <div class="status"><div class="status-dot cyan"></div><span>DA3 READY</span></div>
        </div>
      </div>
      <div class="terminal-container">
        <div class="terminal-header"><span>TERMINAL AGENT</span><span>DA3 v2.1.5</span></div>
        <div class="terminal" id="terminal"></div>
        <div class="terminal-input-area"><input type="text" id="terminalInput" class="terminal-input" placeholder="Type command..."></div>
      </div>
      <div class="agent-suggestions">
        <button class="suggestion-btn" id="uploadBtn">üìÅ Upload Image</button>
        <button class="suggestion-btn" id="helpBtn">‚ùì Help</button>
        <button class="suggestion-btn" id="errorLogBtn">‚ö†Ô∏è Error Log</button>
      </div>
    </div>

    <!-- Right Panel -->
    <div class="right-panel">
      <div class="header">
        <div class="logo"><h1>DA3 <span>SCENE EDITOR</span></h1></div>
        <div class="status-indicators">
          <div class="status"><div class="status-dot yellow"></div><span>EDIT MODE</span></div>
          <div class="status"><div class="status-dot"></div><span id="objectCount">0 OBJECTS</span></div>
        </div>
      </div>
      <div class="visualization-area">
        <canvas id="threeCanvas"></canvas>
        <div class="editor-controls">
          <div class="editor-section">
            <h3>Scene Objects</h3>
            <div id="objectList"></div>
            <button id="addObjectBtn" class="editor-btn">Add Object</button>
            <button id="clearSceneBtn" class="editor-btn">Clear</button>
          </div>
          <div class="editor-section">
            <h3>Properties</h3>
            <label>Rotation Speed <input type="range" id="objectRotation" min="0" max="0.05" step="0.005" value="0.01"></label>
            <label>Size <input type="range" id="objectSize" min="0.1" max="3" step="0.1" value="1"></label>
          </div>
          <div class="editor-section">
            <h3>Scene Settings</h3>
            <label>Grid Visibility <input type="range" id="gridVisibility" min="0" max="1" step="0.1" value="1"></label>
            <button id="resetViewBtn" class="editor-btn">Reset View</button>
            <button id="exportSceneBtn" class="editor-btn">Export</button>
          </div>
        </div>
        <div class="drop-zone" id="dropZone"><div>Drop image here</div></div>
      </div>
    </div>
  </div>

  <input type="file" id="fileInput" accept="image/*" style="display:none">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
  <script>
    let scene,camera,renderer,controls,objects=[],rotationSpeed=0.01,gridHelper;
    const terminal=document.getElementById('terminal');
    const objectList=document.getElementById('objectList');
    const objectCountDisplay=document.getElementById('objectCount');
    const objectRotationSlider=document.getElementById('objectRotation');
    const objectSizeSlider=document.getElementById('objectSize');
    const gridVisibilitySlider=document.getElementById('gridVisibility');
    const addObjectBtn=document.getElementById('addObjectBtn');
    const clearSceneBtn=document.getElementById('clearSceneBtn');
    const resetViewBtn=document.getElementById('resetViewBtn');
    const exportSceneBtn=document.getElementById('exportSceneBtn');
    const uploadBtn=document.getElementById('uploadBtn');
    const helpBtn=document.getElementById('helpBtn');
    const errorLogBtn=document.getElementById('errorLogBtn');
    const fileInput=document.getElementById('fileInput');
    const dropZone=document.getElementById('dropZone');

    function addTerminalLine(msg,type='info'){
      const line=document.createElement('div');
      line.className='terminal-line';
      line.innerHTML=`<span class="terminal-prompt">agent@webXOS:~$ </span><span class="terminal-output terminal-${type}">${msg}</span>`;
      terminal.appendChild(line);
      terminal.scrollTop=terminal.scrollHeight;
    }

    function initScene(){
      scene=new THREE.Scene();
      camera=new THREE.PerspectiveCamera(75,(window.innerWidth-400)/window.innerHeight,0.1,1000);
      camera.position.set(0,5,15);
      renderer=new THREE.WebGLRenderer({canvas:document.getElementById('threeCanvas'),antialias:true});
      renderer.setSize(window.innerWidth-400,window.innerHeight);
      controls=new THREE.OrbitControls(camera,renderer.domElement);
      gridHelper=new THREE.GridHelper(30,30,0x00ff41,0x003300);
      scene.add(gridHelper);
      animate();
    }

    function animate(){
      requestAnimationFrame(animate);
      objects.forEach(o=>{if(o.userData.rotate){o.rotation.x+=rotationSpeed;o.rotation.y+=rotationSpeed*0.7;}});
      controls.update();renderer.render(scene,camera);
    }

    function addObject(type='cube'){
      let geometry;
      if(type==='cube')geometry=new THREE.BoxGeometry(2,2,2);
      else if(type==='sphere')geometry=new THREE.SphereGeometry(1,16,16);
      else geometry=new THREE.CylinderGeometry(1,1,2,16);
      const material=new THREE.MeshStandardMaterial({color:0x39ff14});
      const mesh=new THREE.Mesh(geometry,material);
      mesh.userData={id:Date.now(),name:type,rotate:true};
      scene.add(mesh);objects.push(mesh);updateObjectList();
      addTerminalLine(`Added ${type}`,'success');
    }

    function updateObjectList(){
      objectList.innerHTML='';objectCountDisplay.textContent=`${objects.length} OBJECT${objects.length!==1?'S':''}`;
      objects.forEach(obj=>{
        const item=document.createElement('div');item.className='object-item';
        item.textContent=obj.userData.name;
        const del=document.createElement('button');del.textContent='üóëÔ∏è';del.onclick=()=>{scene.remove(obj);objects=objects.filter(o=>o!==obj);updateObjectList();};
        item.appendChild(del);objectList.appendChild(item);
      });
    }

    // Bindings
    objectRotationSlider.oninput=()=>rotationSpeed=parseFloat(objectRotationSlider.value);
    objectSizeSlider.oninput=()=>objects.forEach(o=>o.scale.set(objectSizeSlider.value,objectSizeSlider.value,objectSizeSlider.value));
    gridVisibilitySlider.oninput=()=>gridHelper.visible=parseFloat(gridVisibilitySlider.value)>0;
    addObjectBtn.onclick=()=>addObject('cube');
    clearSceneBtn.onclick=()=>{objects.forEach(o=>scene.remove(o));objects=[];updateObjectList();};
    resetViewBtn.onclick=()=>{camera.position.set(0,5,15);controls.update();};
    exportSceneBtn.onclick=()=>addTerminalLine('Export not implemented','warning');
    uploadBtn.onclick=()=>fileInput.click();
    helpBtn.onclick=()=>addTerminalLine('Help: Use controls to edit scene','info');
    errorLogBtn.onclick=()=>addTerminalLine('No errors logged','info');
    fileInput.onchange=e=>addTerminalLine(`File uploaded: ${e.target.files[0].name}`,'success');

    window.addEventListener('resize',()=>{camera.aspect=(window.innerWidth-400)/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth-400,window.innerHeight);});

    initScene();
    addTerminalLine('DA3 Scene Generator ready','success');
  </script>
</body>
</
